/*! manageApp 2018-03-29 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],b):b(a["@uirouter/angularjs"]={},a.angular)}(this,function(a,b){"use strict";function c(a){function b(c){return c.length>=d?a.apply(null,c):function(){return b(c.concat([].slice.apply(arguments)))}}var c=[].slice.apply(arguments,[1]),d=a.length;return b(c)}function d(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function e(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return d.apply(null,[].slice.call(arguments).reverse())}function f(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.apply(null,c)&&b.apply(null,c)}}function g(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.apply(null,c)||b.apply(null,c)}}function h(a,b){return function(c){return c[a].apply(c,b)}}function i(a){return function(b){for(var c=0;c<a.length;c++)if(a[c][0](b))return a[c][1](b)}}function j(a){if(db(a)&&a.length){var b=a.slice(0,-1),c=a.slice(-1);return!(b.filter(Na(bb)).length||c.filter(Na(_a)).length)}return _a(a)}function k(a){return a}function l(){}function m(a,b,c,d,e){void 0===e&&(e=!1);var f=function(b){return a()[b].bind(c())},g=function(a){return function(){return b[a]=f(a),b[a].apply(null,arguments)}};return d=d||Object.keys(a()),d.reduce(function(a,b){return a[b]=e?g(b):f(b),a},b)}function n(a,b){return-1!==a.indexOf(b)}function o(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),a}function p(a,b){return a.push(b),b}function q(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=b.concat({}).reverse(),e=pb.apply(null,d);return pb({},e,s(a||{},Object.keys(e)))}function r(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function s(a,b){var c={};for(var d in a)-1!==b.indexOf(d)&&(c[d]=a[d]);return c}function t(a,b){return Object.keys(a).filter(Na(sb(b))).reduce(function(b,c){return b[c]=a[c],b},{})}function u(a,b){return x(a,Ka(b))}function v(a,b){var c=db(a),d=c?[]:{},e=c?function(a){return d.push(a)}:function(a,b){return d[b]=a};return ob(a,function(a,c){b(a,c)&&e(a,c)}),d}function w(a,b){var c;return ob(a,function(a,d){c||b(a,d)&&(c=a)}),c}function x(a,b,c){return c=c||(db(a)?[]:{}),ob(a,function(a,d){return c[d]=b(a,d)}),c}function y(a,b){return a.push(b),a}function z(a,b){return void 0===b&&(b="assert failure"),function(c){var d=a(c);if(!d)throw new Error(_a(b)?b(c):b);return d}}function A(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(0===a.length)return[];for(var c=a.reduce(function(a,b){return Math.min(b.length,a)},9007199254740991),d=[],e=function(b){switch(a.length){case 1:d.push([a[0][b]]);break;case 2:d.push([a[0][b],a[1][b]]);break;case 3:d.push([a[0][b],a[1][b],a[2][b]]);break;case 4:d.push([a[0][b],a[1][b],a[2][b],a[3][b]]);break;default:d.push(a.map(function(a){return a[b]}))}},f=0;c>f;f++)e(f);return d}function B(a,b){var c,d;if(db(b)&&(c=b[0],d=b[1]),!bb(c))throw new Error("invalid parameters to applyPairs");return a[c]=d,a}function C(a){return a.length&&a[a.length-1]||void 0}function D(a,b){return b&&Object.keys(b).forEach(function(a){return delete b[a]}),b||(b={}),pb(b,a)}function E(a,b,c){return db(a)?a.forEach(b,c):void Object.keys(a).forEach(function(c){return b(a[c],c)})}function F(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d=Object.keys(c),e=0;e<d.length;e++)a[d[e]]=c[d[e]]}return a}function G(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c=typeof a,d=typeof b;if(c!==d||"object"!==c)return!1;var e=[a,b];if(Oa(db)(e))return H(a,b);if(Oa(eb)(e))return a.getTime()===b.getTime();if(Oa(fb)(e))return a.toString()===b.toString();if(Oa(_a)(e))return!0;var f=[_a,db,eb,fb];if(f.map(Pa).reduce(function(a,b){return a||!!b(e)},!1))return!1;var g={};for(var h in a){if(!G(a[h],b[h]))return!1;g[h]=!0}for(var h in b)if(!g[h])return!1;return!0}function H(a,b){return a.length!==b.length?!1:A(a,b).reduce(function(a,b){return a&&G(b[0],b[1])},!0)}function I(a){if(!a)return"ui-view (defunct)";var b=a.creationContext?a.creationContext.name||"(root)":"(none)";return"[ui-view#"+a.id+" "+a.$type+":"+a.fqn+" ("+a.name+"@"+b+")]"}function J(b){return ab(b)?a.Category[b]:a.Category[a.Category[b]]}function K(a,b){function c(a){for(var b=d,c=0;c<b.length;c++){var e=new Ta(b[c]);if(e&&e.matches(a.name)||!e&&b[c]===a.name)return!0}return!1}var d=bb(b)?[b]:b,e=_a(d)?d:c;return!!e(a)}function L(a,b,c){function d(a,d,e){void 0===e&&(e={});var h=new Zb(b,c,d,a,g,e);return f.push(h),h.deregister.bind(h)}var e=a._registeredHooks=a._registeredHooks||{},f=e[c.name]=[],g=tb(f);return a[c.name]=d,d}function M(a){return void 0===a&&(a=!1),function(b,c){var d=a?-1:1,e=(b.node.state.path.length-c.node.state.path.length)*d;return 0!==e?e:c.hook.priority-b.hook.priority}}function N(a,b){function c(a){return db(a)?a:Ya(a)?[a]:[]}function d(a){switch(a.length){case 0:return void 0;case 1:return"auto"===b?a[0]:a;default:return a}}function e(a,b){return function(e){if(db(e)&&0===e.length)return e;var f=c(e),g=x(f,a);return b===!0?0===v(g,function(a){return!a}).length:d(g)}}function f(a){return function(b,d){var e=c(b),f=c(d);if(e.length!==f.length)return!1;for(var g=0;g<e.length;g++)if(!a(e[g],f[g]))return!1;return!0}}var g=this;["encode","decode","equals","$normalize"].forEach(function(b){var c=a[b].bind(a),d="equals"===b?f:e;g[b]=d(c)}),pb(this,{dynamic:a.dynamic,name:a.name,pattern:a.pattern,inherit:a.inherit,is:e(a.is.bind(a),!0),$arrayMode:b})}function O(a){function b(){return a.value}return a=bc(a)&&{value:a}||a,b.__cacheable=!0,pb(a,{$$fn:j(a.value)?a.value:b})}function P(b,c,d,e,f){if(b.type&&c&&"string"!==c.name)throw new Error("Param '"+e+"' has two type configurations.");if(b.type&&c&&"string"===c.name&&f.type(b.type))return f.type(b.type);if(c)return c;if(!b.type){var g=d===a.DefType.CONFIG?"any":d===a.DefType.PATH?"path":d===a.DefType.SEARCH?"query":"string";return f.type(g)}return b.type instanceof _b?b.type:f.type(b.type)}function Q(a,b,c){var d=a.squash;if(!b||d===!1)return!1;if(!Ya(d)||null==d)return c;if(d===!0||bb(d))return d;throw new Error("Invalid squash policy: '"+d+"'. Valid policies: false, true, or arbitrary string")}function R(a,b,c,d){var e=[{from:"",to:c||b?void 0:""},{from:null,to:c||b?void 0:""}],f=db(a.replace)?a.replace:[];bb(d)&&f.push({from:d,to:void 0});var g=x(f,Ka("from"));return v(e,function(a){return-1===g.indexOf(a.from)}).concat(f)}function S(a,b){return b.length<=a?b:b.substr(0,a-3)+"..."}function T(a,b){for(;b.length<a;)b+=" ";return b}function U(a){return a.replace(/^([A-Z])/,function(a){return a.toLowerCase()}).replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function V(a){var b=W(a),c=b.match(/^(function [^ ]+\([^)]*\))/),d=c?c[1]:b,e=a.name||"";return e&&d.match(/function \(/)?"function "+e+d.substr(9):d}function W(a){var b=db(a)?a.slice(-1)[0]:a;return b&&b.toString()||"undefined"}function X(a){function b(a){if(cb(a)){if(-1!==c.indexOf(a))return"[circular ref]";c.push(a)}return rc(a)}var c=[];return JSON.stringify(a,function(a,c){return b(c)}).replace(/\\"/g,'"')}function Y(a){var b=new RegExp("("+a+")","g");return function(a){return a.split(b).filter(k)}}function Z(a,b){return bb(C(a))&&bb(b)?a.slice(0,-1).concat(C(a)+b):y(a,b)}function $(){var a=function(a){var b=function(a){return null!=a?a.toString():a},c={encode:b,decode:b,is:Qa(String),pattern:/.*/,equals:function(a,b){return a==b}};return pb({},c,a)};pb(zc.prototype,{string:a({}),path:a({pattern:/[^\/]*/}),query:a({}),hash:a({inherit:!1}),"int":a({decode:function(a){return parseInt(a,10)},is:function(a){return!$a(a)&&this.decode(a.toString())===a},pattern:/-?\d+/}),bool:a({encode:function(a){return a&&1||0},decode:function(a){return 0!==parseInt(a,10)},is:Qa(Boolean),pattern:/0|1/}),date:a({encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):void 0},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):void 0},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return["getFullYear","getMonth","getDate"].reduce(function(c,d){return c&&a[d]()===b[d]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:a({encode:nb,decode:mb,is:Qa(Object),equals:qb,pattern:/[^\/]*/}),any:a({encode:k,decode:k,is:function(){return!0},equals:qb})})}function _(a){return a.name}function aa(a){return a.self.$$state=function(){return a},a.self}function ba(a){return a.parent&&a.parent.data&&(a.data=a.self.data=rb(a.parent.data,a.data)),a.data}function ca(a){return a.parent?a.parent.path.concat(a):[a]}function da(a){var b=a.parent?pb({},a.parent.includes):{};return b[a.name]=!0,b}function ea(a){var b=function(a,b){return Object.keys(a||{}).map(function(c){return{token:c,val:a[c],deps:void 0,policy:b[c]}})},c=function(a){var b=jb.$injector;return a.$inject||b&&b.annotate(a,b.strictDi)||"deferred"},d=function(a){return!(!a.token||!a.resolveFn)},f=function(a){return!(!a.provide&&!a.token||!(a.useValue||a.useFactory||a.useExisting||a.useClass))},g=function(a){return!!(a&&a.val&&(bb(a.val)||db(a.val)||_a(a.val)))},h=function(a){return a.provide||a.token},j=i([[Ka("resolveFn"),function(a){return new gc(h(a),a.resolveFn,a.deps,a.policy)}],[Ka("useFactory"),function(a){return new gc(h(a),a.useFactory,a.deps||a.dependencies,a.policy)}],[Ka("useClass"),function(a){return new gc(h(a),function(){return new a.useClass},[],a.policy)}],[Ka("useValue"),function(a){return new gc(h(a),function(){return a.useValue},[],a.policy,a.useValue)}],[Ka("useExisting"),function(a){return new gc(h(a),k,[a.useExisting],a.policy)}]]),l=i([[e(Ka("val"),bb),function(a){return new gc(a.token,k,[a.val],a.policy)}],[e(Ka("val"),db),function(a){return new gc(a.token,C(a.val),a.val.slice(0,-1),a.policy)}],[e(Ka("val"),_a),function(a){return new gc(a.token,a.val,c(a.val),a.policy)}]]),m=i([[Qa(gc),function(a){return a}],[d,j],[f,j],[g,l],[Sa(!0),function(a){throw new Error("Invalid resolve value: "+X(a))}]]),n=a.resolve,o=db(n)?n:b(n,a.resolvePolicy||{});return o.map(m)}function fa(a,b){var c=["",""],d=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return d;switch(b.squash){case!1:c=["(",")"+(b.isOptional?"?":"")];break;case!0:d=d.replace(/\/$/,""),c=["(?:/(",")|/)?"];break;default:c=["("+b.squash+"|",")?"]}return d+c[0]+b.type.pattern.source+c[1]}function ga(a,b,c,d){return"/"===d?a:b?uc(d)+a:c?d.slice(1)+a:a}function ha(a){if(!(_a(a)||bb(a)||Qa(Wb)(a)||Wb.isDef(a)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return _a(a)?a:Sa(a)}function ia(a){a.addResolvable(gc.fromData(dd,a.router),""),a.addResolvable(gc.fromData(pc,a),""),a.addResolvable(gc.fromData("$transition$",a),""),a.addResolvable(gc.fromData("$stateParams",a.params()),""),a.entering().forEach(function(b){a.addResolvable(gc.fromData("$state$",b),b)})}function ja(a){return function(b,c){var d=c.$$state(),e=d[a];return e(b,c)}}function ka(a,b){function c(b){return b&&Array.isArray(b.states)&&b.states.forEach(function(b){return a.router.stateRegistry.register(b)}),b}var d=b.$$state().lazyLoad,e=d._promise;if(!e){var f=function(a){return delete b.lazyLoad,delete b.$$state().lazyLoad,delete d._promise,a},g=function(a){return delete d._promise,jb.$q.reject(a)};e=d._promise=jb.$q.when(d(a,b)).then(c).then(f,g)}return e}function la(a){var b=a._ignoredReason();if(b){Vb.traceTransitionIgnored(a);var c=a.router.globals.transition;return"SameAsCurrent"===b&&c&&c.abort(),Nb.ignored().toPromise()}}function ma(a){if(!a.valid())throw new Error(a.error())}function na(a){var b=function(a){return a||""},c=vc(a).map(b),d=c[0],e=c[1],f=wc(d).map(b),g=f[0],h=f[1];return{path:g,search:h,hash:e,url:a}}function oa(a,b,c,d){return function(e){function f(a){a.dispose(g),a.dispose(h)}var g=e.locationService=new c(e),h=e.locationConfig=new d(e,b);return{name:a,service:g,configuration:h,dispose:f}}}function pa(a){return jb.$injector=Rd,jb.$q=Nd,{name:"vanilla.services",$q:Nd,$injector:Rd,dispose:function(){return null}}}function qa(){var a=null;return function(b,c){return a=a||jb.$injector.get("$templateFactory"),[new je(b,c,a)]}}function ra(a){if(!a.parent)return{};var b=["templateProvider","templateUrl","template","notify","async"],c=["controller","controllerProvider","controllerAs","resolveAs"],d=["component","bindings","componentProvider"],e=b.concat(c),f=d.concat(e);if(Ya(a.views)&&he(f,a))throw new Error("State '"+a.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+f.filter(function(b){return Ya(a[b])}).join(", "));var g={},h=a.views||{$default:s(a,f)};return ob(h,function(b,c){if(c=c||"$default",bb(b)&&(b={component:b}),b=pb({},b),he(d,b)&&he(e,b))throw new Error("Cannot combine: "+d.join("|")+" with: "+e.join("|")+" in stateview: '"+c+"@"+a.name+"'");b.resolveAs=b.resolveAs||"$resolve",b.$type="ng1",b.$context=a,b.$name=c;var f=Vc.normalizeUIViewTarget(b.$context,b.$name);b.$uiViewName=f.uiViewName,b.$uiViewContextAnchor=f.uiViewContextAnchor,g[c]=b}),g}function sa(a){var b=jb.$injector.get(a+"Directive");if(!b||!b.length)throw new Error("Unable to find component named '"+a+"'");return b.map(le).reduce(Bb,[])}function ta(a){function b(a,b,d,e,f,g){return c._runtimeServices(e,a,d,b),delete we.router,delete we.$get,we}we=this.router=new dd,we.stateProvider=new ne(we.stateRegistry,we.stateService),we.stateRegistry.decorator("views",ra),we.stateRegistry.decorator("onExit",oe("onExit")),we.stateRegistry.decorator("onRetain",oe("onRetain")),we.stateRegistry.decorator("onEnter",oe("onEnter")),we.viewService._pluginapi._viewConfigFactory("ng1",qa());var c=we.locationService=we.locationConfig=new pe(a);return pe.monkeyPatchPathParameterType(we),we.router=we,we.$get=b,b.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],we}function ua(a,b,c){jb.$injector=a,jb.$q=b,c.stateRegistry.get().map(function(a){return a.$$state().resolvables}).reduce(Bb,[]).filter(function(a){return"deferred"===a.deps}).forEach(function(b){return b.deps=a.annotate(b.resolveFn,a.strictDi)})}function va(a){a.$watch(function(){Vb.approximateDigests++})}function wa(a){var b,c=a.match(/^\s*({[^}]*})\s*$/);if(c&&(a="("+c[1]+")"),b=a.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/),!b||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1]||null,paramExpr:b[3]||null}}function xa(a){var b=a.parent().inheritedData("$uiView"),c=Ma("$cfg.path")(b);return c?C(c).state.name:void 0}function ya(a,b,c){var d=c.uiState||a.current.name,e=pb(Ba(b,a),c.uiStateOpts||{}),f=a.href(d,c.uiStateParams,e);return{uiState:d,uiStateParams:c.uiStateParams,uiStateOpts:e,href:f}}function za(a){var b="[object SVGAnimatedString]"===Object.prototype.toString.call(a.prop("href")),c="FORM"===a[0].nodeName;return{attr:c?"action":b?"xlink:href":"href",isAnchor:"A"===a.prop("tagName").toUpperCase(),clickable:!c}}function Aa(a,b,c,d,e){return function(f){var g=f.which||f.button,h=e();if(!(g>1||f.ctrlKey||f.metaKey||f.shiftKey||a.attr("target"))){var i=c(function(){b.go(h.uiState,h.uiStateParams,h.uiStateOpts)});f.preventDefault();var j=d.isAnchor&&!h.href?1:0;f.preventDefault=function(){j--<=0&&c.cancel(i)}}}}function Ba(a,b){return{relative:xa(a)||b.$current,inherit:!0,source:"sref"}}function Ca(a,b,c,d){var e;d&&(e=d.events),db(e)||(e=["click"]);for(var f=a.on?"on":"bind",g=0,h=e;g<h.length;g++){var i=h[g];a[f](i,c)}b.$on("$destroy",function(){for(var b=a.off?"off":"unbind",d=0,f=e;d<f.length;d++){var g=f[d];a[b](g,c)}})}function Da(a){var b=function(b,c,d){return a.is(b,c,d)};return b.$stateful=!0,b}function Ea(a){var b=function(b,c,d){return a.includes(b,c,d)};return b.$stateful=!0,b}function Fa(a,b,c,d,e,f){var g=Ma("viewDecl.controllerAs"),h=Ma("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(d){var f=d.html();return d.empty(),function(d,i){var j=i.data("$uiView");if(!j)return i.html(f),void a(i.contents())(d);var k=j.$cfg||{viewDecl:{},getTemplate:l},m=k.path&&new mc(k.path);i.html(k.getTemplate(i,m)||f),Vb.traceUIViewFill(j.$uiView,i.html());var n=a(i.contents()),o=k.controller,p=g(k),q=h(k),r=m&&Be(m);if(d[q]=r,o){var s=b(o,pb({},r,{$scope:d,$element:i}));p&&(d[p]=s,d[p][q]=r),i.data("$ngControllerController",s),i.children().data("$ngControllerController",s),Ga(e,c,s,d,k)}if(bb(k.viewDecl.component))var t=k.viewDecl.component,u=U(t),v=new RegExp("^(x-|data-)?"+u+"$","i"),w=function(){var a=[].slice.call(i[0].children).filter(function(a){return a&&a.tagName&&v.exec(a.tagName)});return a&&Ja.element(a).data("$"+t+"Controller")},x=d.$watch(w,function(a){a&&(Ga(e,c,a,d,k),x())});n(d)}}}}function Ga(a,b,c,d,e){!_a(c.$onInit)||e.viewDecl.component&&Fe||c.$onInit();var f=C(e.path).state.self,g={bind:c};if(_a(c.uiOnParamsChanged)){var h=new mc(e.path),i=h.getResolvable("$transition$").data,j=function(a){if(a!==i&&-1===a.exiting().indexOf(f)){var b=a.params("to"),d=a.params("from"),e=a.treeChanges().to.map(function(a){return a.paramSchema}).reduce(Bb,[]),g=a.treeChanges().from.map(function(a){return a.paramSchema}).reduce(Bb,[]),h=e.filter(function(a){var c=g.indexOf(a);return-1===c||!g[c].type.equals(b[a.id],d[a.id])});if(h.length){var j=h.map(function(a){return a.id}),k=v(b,function(a,b){return-1!==j.indexOf(b)});c.uiOnParamsChanged(k,a)}}};d.$on("$destroy",b.onSuccess({},j,g))}if(_a(c.uiCanExit)){var k=Ge++,l="_uiCanExitIds",m=function(a){return!!a&&(a[l]&&a[l][k]===!0||m(a.redirectedFrom()))},n=function(b){var d,e=b[l]=b[l]||{};return m(b)||(d=a.when(c.uiCanExit(b)),d.then(function(a){return e[k]=a!==!1})),d},o={exiting:f.name};d.$on("$destroy",b.onBefore(o,n,g))}}function Ha(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}var Ia=angular,Ja=b&&b.module?b:Ia,Ka=function(a){return function(b){return b&&b[a]}},La=c(function(a,b,c){return c&&c[a]===b}),Ma=function(a){return e.apply(null,a.split(".").map(Ka))},Na=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return!a.apply(null,b)}},Oa=function(a){return function(b){return b.reduce(function(b,c){return b&&!!a(c)},!0)}},Pa=function(a){return function(b){return b.reduce(function(b,c){return b||!!a(c)},!1)}},Qa=function(a){return function(b){return null!=b&&b.constructor===a||b instanceof a}},Ra=function(a){return function(b){return a===b}},Sa=function(a){return function(){return a}},Ta=function(){function a(a){this.text=a,this.glob=a.split(".");var b=this.text.split(".").map(function(a){return"**"===a?"(?:|(?:\\.[^.]*)*)":"*"===a?"\\.[^.]*":"\\."+a}).join("");this.regexp=new RegExp("^"+b+"$")}return a.is=function(a){return!!/[!,*]+/.exec(a)},a.fromString=function(b){return a.is(b)?new a(b):null},a.prototype.matches=function(a){return this.regexp.test("."+a)},a}(),Ua=function(){function a(b){return a.create(b||{})}return a.create=function(b){b=a.isStateClass(b)?new b:b;var c=rb(rb(b,a.prototype));return b.$$state=function(){return c},c.self=b,c.__stateObjectCache={nameGlob:Ta.fromString(c.name)},c},a.prototype.is=function(a){return this===a||this.self===a||this.fqn()===a},a.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var a=this.parent.fqn();return a?a+"."+this.name:this.name},a.prototype.root=function(){return this.parent&&this.parent.root()||this},a.prototype.parameters=function(a){a=q(a,{inherit:!0,matchingKeys:null});var b=a.inherit&&this.parent&&this.parent.parameters()||[];return b.concat(yb(this.params)).filter(function(b){return!a.matchingKeys||a.matchingKeys.hasOwnProperty(b.id)})},a.prototype.parameter=function(a,b){return void 0===b&&(b={}),this.url&&this.url.parameter(a,b)||w(yb(this.params),La("id",a))||b.inherit&&this.parent&&this.parent.parameter(a)},a.prototype.toString=function(){return this.fqn()},a.isStateClass=function(a){return _a(a)&&a.__uiRouterState===!0},a.isState=function(a){return cb(a.__stateObjectCache)},a}(),Va=Object.prototype.toString,Wa=function(a){return function(b){return typeof b===a}},Xa=Wa("undefined"),Ya=Na(Xa),Za=function(a){return null===a},$a=g(Za,Xa),_a=Wa("function"),ab=Wa("number"),bb=Wa("string"),cb=function(a){return null!==a&&"object"==typeof a},db=Array.isArray,eb=function(a){return"[object Date]"===Va.call(a)},fb=function(a){return"[object RegExp]"===Va.call(a)},gb=Ua.isState,hb=f(cb,e(Ka("then"),_a)),ib=function(a){return function(){throw new Error(a+"(): No coreservices implementation for UI-Router is loaded.")}},jb={$q:void 0,$injector:void 0},kb="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0,lb=kb.angular||{},mb=lb.fromJson||JSON.parse.bind(JSON),nb=lb.toJson||JSON.stringify.bind(JSON),ob=lb.forEach||E,pb=Object.assign||F,qb=lb.equals||G,rb=function(a,b){return pb(Object.create(a),b)},sb=c(n),tb=c(o),ub=c(p),vb=function(a){return a.slice().forEach(function(b){"function"==typeof b&&b(),tb(a,b)})},wb=function(a,b){return pb(a,b)},xb=x,yb=function(a){return Object.keys(a).map(function(b){return a[b]})},zb=function(a,b){return a&&b},Ab=function(a,b){return a||b},Bb=function(a,b){return a.concat(b)},Cb=function(a,b){return db(b)?a.concat(b.reduce(Cb,[])):y(a,b)},Db=function(a,b){return sb(a,b)?a:y(a,b)},Eb=function(a){return a.reduce(Bb,[])},Fb=function(a){return a.reduce(Cb,[])},Gb=z,Hb=z,Ib=function(a){return Object.keys(a).map(function(b){return[b,a[b]]})},Jb=function(a){return a["catch"](function(a){return 0})&&a},Kb=function(a){return Jb(jb.$q.reject(a))},Lb=function(){function a(a,b){void 0===a&&(a=[]),void 0===b&&(b=null),this._items=a,this._limit=b,this._evictListeners=[],this.onEvict=ub(this._evictListeners)}return a.prototype.enqueue=function(a){var b=this._items;return b.push(a),this._limit&&b.length>this._limit&&this.evict(),a},a.prototype.evict=function(){var a=this._items.shift();return this._evictListeners.forEach(function(b){return b(a)}),a},a.prototype.dequeue=function(){return this.size()?this._items.splice(0,1)[0]:void 0},a.prototype.clear=function(){var a=this._items;return this._items=[],a},a.prototype.size=function(){return this._items.length},a.prototype.remove=function(a){var b=this._items.indexOf(a);return b>-1&&this._items.splice(b,1)[0]},a.prototype.peekTail=function(){return this._items[this._items.length-1]},a.prototype.peekHead=function(){return this.size()?this._items[0]:void 0},a}();!function(a){a[a.SUPERSEDED=2]="SUPERSEDED",a[a.ABORTED=3]="ABORTED",a[a.INVALID=4]="INVALID",a[a.IGNORED=5]="IGNORED",a[a.ERROR=6]="ERROR"}(a.RejectType||(a.RejectType={}));var Mb=0,Nb=function(){function b(a,b,c){this.$id=Mb++,this.type=a,this.message=b,this.detail=c}return b.isRejectionPromise=function(a){return a&&"function"==typeof a.then&&Qa(b)(a._transitionRejection)},b.superseded=function(c,d){var e="The transition has been superseded by a different transition",f=new b(a.RejectType.SUPERSEDED,e,c);return d&&d.redirected&&(f.redirected=!0),f},b.redirected=function(a){return b.superseded(a,{redirected:!0})},b.invalid=function(c){var d="This transition is invalid";return new b(a.RejectType.INVALID,d,c)},b.ignored=function(c){var d="The transition was ignored";return new b(a.RejectType.IGNORED,d,c)},b.aborted=function(c){var d="The transition has been aborted";return new b(a.RejectType.ABORTED,d,c)},b.errored=function(c){var d="The transition errored";return new b(a.RejectType.ERROR,d,c)},b.normalize=function(a){return Qa(b)(a)?a:b.errored(a)},b.prototype.toString=function(){var a=function(a){return a&&a.toString!==Object.prototype.toString?a.toString():X(a)},b=a(this.detail),c=this,d=c.$id,e=c.type,f=c.message;return"Transition Rejection($id: "+d+" type: "+e+", message: "+f+", detail: "+b+")"},b.prototype.toPromise=function(){return pb(Kb(this),{_transitionRejection:this})},b}(),Ob=function(a){var b=a.viewDecl,c=b.$context.name||"(root)";return"[View#"+a.$id+" from '"+c+"' state]: target ui-view: '"+b.$uiViewName+"@"+b.$uiViewContextAnchor+"'"},Pb=Function.prototype.bind.call(console.log,console),Qb=_a(console.table)?console.table.bind(console):Pb.bind(console);!function(a){a[a.RESOLVE=0]="RESOLVE",a[a.TRANSITION=1]="TRANSITION",a[a.HOOK=2]="HOOK",a[a.UIVIEW=3]="UIVIEW",a[a.VIEWCONFIG=4]="VIEWCONFIG"}(a.Category||(a.Category={}));var Rb=Ma("$id"),Sb=Ma("router.$id"),Tb=function(a){return"Transition #"+Rb(a)+"-"+Sb(a)},Ub=function(){function b(){this._enabled={},this.approximateDigests=0}return b.prototype._set=function(b,c){var d=this;c.length||(c=Object.keys(a.Category).map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)}).map(function(b){return a.Category[b]})),c.map(J).forEach(function(a){return d._enabled[a]=b})},b.prototype.enable=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._set(!0,a)},b.prototype.disable=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._set(!1,a)},b.prototype.enabled=function(a){return!!this._enabled[J(a)]},b.prototype.traceTransitionStart=function(b){this.enabled(a.Category.TRANSITION)&&console.log(Tb(b)+": Started  -> "+X(b))},b.prototype.traceTransitionIgnored=function(b){this.enabled(a.Category.TRANSITION)&&console.log(Tb(b)+": Ignored  <> "+X(b))},b.prototype.traceHookInvocation=function(b,c,d){if(this.enabled(a.Category.HOOK)){var e=Ma("traceData.hookType")(d)||"internal",f=Ma("traceData.context.state.name")(d)||Ma("traceData.context")(d)||"unknown",g=V(b.registeredHook.callback);console.log(Tb(c)+":   Hook -> "+e+" context: "+f+", "+S(200,g))}},b.prototype.traceHookResult=function(b,c,d){this.enabled(a.Category.HOOK)&&console.log(Tb(c)+":   <- Hook returned: "+S(200,X(b)))},b.prototype.traceResolvePath=function(b,c,d){this.enabled(a.Category.RESOLVE)&&console.log(Tb(d)+":         Resolving "+b+" ("+c+")")},b.prototype.traceResolvableResolved=function(b,c){this.enabled(a.Category.RESOLVE)&&console.log(Tb(c)+":               <- Resolved  "+b+" to: "+S(200,X(b.data)))},b.prototype.traceError=function(b,c){this.enabled(a.Category.TRANSITION)&&console.log(Tb(c)+": <- Rejected "+X(c)+", reason: "+b)},b.prototype.traceSuccess=function(b,c){this.enabled(a.Category.TRANSITION)&&console.log(Tb(c)+": <- Success  "+X(c)+", final state: "+b.name)},b.prototype.traceUIViewEvent=function(b,c,d){void 0===d&&(d=""),this.enabled(a.Category.UIVIEW)&&console.log("ui-view: "+T(30,b)+" "+I(c)+d)},b.prototype.traceUIViewConfigUpdated=function(b,c){this.enabled(a.Category.UIVIEW)&&this.traceUIViewEvent("Updating",b," with ViewConfig from context='"+c+"'")},b.prototype.traceUIViewFill=function(b,c){this.enabled(a.Category.UIVIEW)&&this.traceUIViewEvent("Fill",b," with: "+S(200,c))},b.prototype.traceViewSync=function(b){if(this.enabled(a.Category.VIEWCONFIG)){var c="uiview component fqn",d="view config state (view name)",e=b.map(function(a){var b=a.uiView,e=a.viewConfig,f=b&&b.fqn,g=e&&e.viewDecl.$context.name+": ("+e.viewDecl.$name+")";return h={},h[c]=f,h[d]=g,h;var h}).sort(function(a,b){return(a[c]||"").localeCompare(b[c]||"")});Qb(e)}},b.prototype.traceViewServiceEvent=function(b,c){this.enabled(a.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+b+" "+Ob(c))},b.prototype.traceViewServiceUIViewEvent=function(b,c){this.enabled(a.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+b+" "+I(c))},b}(),Vb=new Ub;!function(a){a[a.CREATE=0]="CREATE",a[a.BEFORE=1]="BEFORE",a[a.RUN=2]="RUN",a[a.SUCCESS=3]="SUCCESS",a[a.ERROR=4]="ERROR"}(a.TransitionHookPhase||(a.TransitionHookPhase={})),function(a){a[a.TRANSITION=0]="TRANSITION",a[a.STATE=1]="STATE"}(a.TransitionHookScope||(a.TransitionHookScope={}));var Wb=function(){function a(a,b,c,d){this._stateRegistry=a,this._identifier=b,this._identifier=b,this._params=pb({},c||{}),this._options=pb({},d||{}),this._definition=a.matcher.find(b,this._options.relative)}return a.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},a.prototype.identifier=function(){return this._identifier},a.prototype.params=function(){return this._params},a.prototype.$state=function(){return this._definition},a.prototype.state=function(){return this._definition&&this._definition.self},a.prototype.options=function(){return this._options},a.prototype.exists=function(){return!(!this._definition||!this._definition.self)},a.prototype.valid=function(){return!this.error()},a.prototype.error=function(){var a=this.options().relative;if(!this._definition&&a){var b=a.name?a.name:a;return"Could not resolve '"+this.name()+"' from state '"+b+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},a.prototype.toString=function(){return"'"+this.name()+"'"+X(this.params())},a.prototype.withState=function(b){return new a(this._stateRegistry,b,this._params,this._options)},a.prototype.withParams=function(b,c){void 0===c&&(c=!1);var d=c?b:pb({},this._params,b);return new a(this._stateRegistry,this._identifier,d,this._options)},a.prototype.withOptions=function(b,c){void 0===c&&(c=!1);var d=c?b:pb({},this._options,b);return new a(this._stateRegistry,this._identifier,this._params,d)},a.isDef=function(a){return a&&a.state&&(bb(a.state)||bb(a.state.name))},a}(),Xb={current:l,transition:null,traceData:{},bind:null},Yb=function(){function b(b,c,d,e){var f=this;this.transition=b,this.stateContext=c,this.registeredHook=d,this.options=e,this.isSuperseded=function(){return f.type.hookPhase===a.TransitionHookPhase.RUN&&!f.options.transition.isActive()},this.options=q(e,Xb),this.type=d.eventType}return b.chain=function(a,b){var c=function(a,b){return a.then(function(){return b.invokeHook()})};return a.reduce(c,b||jb.$q.when())},b.invokeHooks=function(a,c){for(var d=0;d<a.length;d++){var e=a[d].invokeHook();if(hb(e)){var f=a.slice(d+1);return b.chain(f,e).then(c)}}return c()},b.runAllHooks=function(a){a.forEach(function(a){return a.invokeHook()})},b.prototype.logError=function(a){this.transition.router.stateService.defaultErrorHandler()(a)},b.prototype.invokeHook=function(){var a=this,b=this.registeredHook;if(!b._deregistered){var c=this.getNotCurrentRejection();if(c)return c;var d=this.options;Vb.traceHookInvocation(this,this.transition,d);var e=function(){return b.callback.call(d.bind,a.transition,a.stateContext)},f=function(a){return Nb.normalize(a).toPromise()},g=function(c){return b.eventType.getErrorHandler(a)(c)},h=function(c){return b.eventType.getResultHandler(a)(c)};try{var i=e();return!this.type.synchronous&&hb(i)?i["catch"](f).then(h,g):h(i)}catch(j){return g(Nb.normalize(j))}finally{b.invokeLimit&&++b.invokeCount>=b.invokeLimit&&b.deregister()}}},b.prototype.handleHookResult=function(a){var b=this,c=this.getNotCurrentRejection();if(c)return c;if(hb(a))return a.then(function(a){return b.handleHookResult(a)});if(Vb.traceHookResult(a,this.transition,this.options),a===!1)return Nb.aborted("Hook aborted transition").toPromise();var d=Qa(Wb);return d(a)?Nb.redirected(a).toPromise():void 0},b.prototype.getNotCurrentRejection=function(){var a=this.transition.router;return a._disposed?Nb.aborted("UIRouter instance #"+a.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?Nb.aborted().toPromise():this.isSuperseded()?Nb.superseded(this.options.current()).toPromise():void 0},b.prototype.toString=function(){var a=this,b=a.options,c=a.registeredHook,d=Ma("traceData.hookType")(b)||"internal",e=Ma("traceData.context.state.name")(b)||Ma("traceData.context")(b)||"unknown",f=W(c.callback);return d+" context: "+e+", "+S(200,f)},b.HANDLE_RESULT=function(a){
return function(b){return a.handleHookResult(b)}},b.LOG_REJECTED_RESULT=function(a){return function(b){return void(hb(b)&&b["catch"](function(b){return a.logError(Nb.normalize(b))}))}},b.LOG_ERROR=function(a){return function(b){return a.logError(b)}},b.REJECT_ERROR=function(a){return function(a){return Kb(a)}},b.THROW_ERROR=function(a){return function(a){throw a}},b}(),Zb=function(){function b(a,b,c,d,e,f){void 0===f&&(f={}),this.tranSvc=a,this.eventType=b,this.callback=c,this.matchCriteria=d,this.removeHookFromRegistry=e,this.invokeCount=0,this._deregistered=!1,this.priority=f.priority||0,this.bind=f.bind||null,this.invokeLimit=f.invokeLimit}return b.prototype._matchingNodes=function(a,b){if(b===!0)return a;var c=a.filter(function(a){return K(a.state,b)});return c.length?c:null},b.prototype._getDefaultMatchCriteria=function(){return xb(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},b.prototype._getMatchingNodes=function(b){var c=this,d=pb(this._getDefaultMatchCriteria(),this.matchCriteria),e=yb(this.tranSvc._pluginapi._getPathTypes());return e.reduce(function(e,f){var g=f.scope===a.TransitionHookScope.STATE,h=b[f.name]||[],i=g?h:[C(h)];return e[f.name]=c._matchingNodes(i,d[f.name]),e},{})},b.prototype.matches=function(a){var b=this._getMatchingNodes(a),c=yb(b).every(k);return c?b:null},b.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},b}(),$b=function(){function b(a){this.transition=a}return b.prototype.buildHooksForPhase=function(a){var b=this,c=this.transition.router.transitionService;return c._pluginapi._getEvents(a).map(function(a){return b.buildHooks(a)}).reduce(Bb,[]).filter(k)},b.prototype.buildHooks=function(b){var c=this.transition,d=c.treeChanges(),e=this.getMatchingHooks(b,d);if(!e)return[];var f={transition:c,current:c.options().current},g=function(e){var g=e.matches(d),h=g[b.criteriaMatchPath.name];return h.map(function(d){var g=pb({bind:e.bind,traceData:{hookType:b.name,context:d}},f),h=b.criteriaMatchPath.scope===a.TransitionHookScope.STATE?d.state.self:null,i=new Yb(c,h,e,g);return{hook:e,node:d,transitionHook:i}})};return e.map(g).reduce(Bb,[]).sort(M(b.reverseSort)).map(function(a){return a.transitionHook})},b.prototype.getMatchingHooks=function(b,c){var d=b.hookPhase===a.TransitionHookPhase.CREATE,e=this.transition.router.transitionService,f=d?[e]:[this.transition,e];return f.map(function(a){return a.getHooks(b.name)}).filter(Gb(db,"broken event named: "+b.name)).reduce(Bb,[]).filter(function(a){return a.matches(c)})},b}(),_b=function(){function a(a){this.pattern=/.*/,this.inherit=!0,pb(this,a)}return a.prototype.is=function(a,b){return!0},a.prototype.encode=function(a,b){return a},a.prototype.decode=function(a,b){return a},a.prototype.equals=function(a,b){return a==b},a.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},a.prototype.toString=function(){return"{ParamType:"+this.name+"}"},a.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},a.prototype.$asArray=function(a,b){if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new N(this,a)},a}(),ac=Object.prototype.hasOwnProperty,bc=function(a){return 0===["value","type","squash","array","dynamic"].filter(ac.bind(a||{})).length};!function(a){a[a.PATH=0]="PATH",a[a.SEARCH=1]="SEARCH",a[a.CONFIG=2]="CONFIG"}(a.DefType||(a.DefType={}));var cc=function(){function b(b,c,d,e,f){function g(){var c={array:e===a.DefType.SEARCH?"auto":!1},f=b.match(/\[\]$/)?{array:!0}:{};return pb(c,f,d).array}d=O(d),c=P(d,c,e,b,f.paramTypes);var h=g();c=h?c.$asArray(h,e===a.DefType.SEARCH):c;var i=void 0!==d.value||e===a.DefType.SEARCH,j=Ya(d.dynamic)?!!d.dynamic:!!c.dynamic,k=Ya(d.raw)?!!d.raw:!!c.raw,l=Q(d,i,f.defaultSquashPolicy()),m=R(d,h,i,l),n=Ya(d.inherit)?!!d.inherit:!!c.inherit;pb(this,{id:b,type:c,location:e,isOptional:i,dynamic:j,raw:k,squash:l,replace:m,inherit:n,array:h,config:d})}return b.values=function(a,b){void 0===b&&(b={});for(var c={},d=0,e=a;d<e.length;d++){var f=e[d];c[f.id]=f.value(b[f.id])}return c},b.changed=function(a,b,c){return void 0===b&&(b={}),void 0===c&&(c={}),a.filter(function(a){return!a.type.equals(b[a.id],c[a.id])})},b.equals=function(a,c,d){return void 0===c&&(c={}),void 0===d&&(d={}),0===b.changed(a,c,d).length},b.validates=function(a,b){return void 0===b&&(b={}),a.map(function(a){return a.validates(b[a.id])}).reduce(zb,!0)},b.prototype.isDefaultValue=function(a){return this.isOptional&&this.type.equals(this.value(),a)},b.prototype.value=function(a){var b=this,c=function(){if(b._defaultValueCache)return b._defaultValueCache.defaultValue;if(!jb.$injector)throw new Error("Injectable functions cannot be called at configuration time");var a=jb.$injector.invoke(b.config.$$fn);if(null!==a&&void 0!==a&&!b.type.is(a))throw new Error("Default value ("+a+") for parameter '"+b.id+"' is not an instance of ParamType ("+b.type.name+")");return b.config.$$fn.__cacheable&&(b._defaultValueCache={defaultValue:a}),a},d=function(a){for(var c=0,d=b.replace;c<d.length;c++){var e=d[c];if(e.from===a)return e.to}return a};return a=d(a),Xa(a)?c():this.type.$normalize(a)},b.prototype.isSearch=function(){return this.location===a.DefType.SEARCH},b.prototype.validates=function(a){if((Xa(a)||null===a)&&this.isOptional)return!0;var b=this.type.$normalize(a);if(!this.type.is(b))return!1;var c=this.type.encode(b);return!(bb(c)&&!this.type.pattern.exec(c))},b.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},b}(),dc=function(){function a(b){if(b instanceof a){var c=b;this.state=c.state,this.paramSchema=c.paramSchema.slice(),this.paramValues=pb({},c.paramValues),this.resolvables=c.resolvables.slice(),this.views=c.views&&c.views.slice()}else{var d=b;this.state=d,this.paramSchema=d.parameters({inherit:!1}),this.paramValues={},this.resolvables=d.resolvables.map(function(a){return a.clone()})}}return a.prototype.clone=function(){return new a(this)},a.prototype.applyRawParams=function(a){var b=function(b){return[b.id,b.value(a[b.id])]};return this.paramValues=this.paramSchema.reduce(function(a,c){return B(a,b(c))},{}),this},a.prototype.parameter=function(a){return w(this.paramSchema,La("id",a))},a.prototype.equals=function(a,b){var c=this.diff(a,b);return c&&0===c.length},a.prototype.diff=function(a,b){if(this.state!==a.state)return!1;var c=b?b(this):this.paramSchema;return cc.changed(c,this.paramValues,a.paramValues)},a.clone=function(a){return a.clone()},a}(),ec=function(){function a(){}return a.makeTargetState=function(a,b){var c=C(b).state;return new Wb(a,c,b.map(Ka("paramValues")).reduce(wb,{}),{})},a.buildPath=function(a){var b=a.params();return a.$state().path.map(function(a){return new dc(a).applyRawParams(b)})},a.buildToPath=function(b,c){var d=a.buildPath(c);return c.options().inherit?a.inheritParams(b,d,Object.keys(c.params())):d},a.applyViewConfigs=function(b,c,d){c.filter(function(a){return sb(d,a.state)}).forEach(function(d){var e=yb(d.state.views||{}),f=a.subPath(c,function(a){return a===d}),g=e.map(function(a){return b.createViewConfig(f,a)});d.views=g.reduce(Bb,[])})},a.inheritParams=function(a,b,c){function d(a,b){var c=w(a,La("state",b));return pb({},c&&c.paramValues)}function e(b){var e=pb({},b&&b.paramValues),g=s(e,c);e=t(e,c);var h=t(d(a,b.state)||{},f),i=pb(e,h,g);return new dc(b.state).applyRawParams(i)}void 0===c&&(c=[]);var f=a.map(function(a){return a.paramSchema}).reduce(Bb,[]).filter(function(a){return!a.inherit}).map(Ka("id"));return b.map(e)},a.treeChanges=function(b,c,d){function e(a,b){var d=a.clone();return d.paramValues=c[b].paramValues,d}for(var f=Math.min(b.length,c.length),g=0,h=function(b,c){return b.equals(c,a.nonDynamicParams)};f>g&&b[g].state!==d&&h(b[g],c[g]);)g++;var i,j,k,l,m;i=b,j=i.slice(0,g),k=i.slice(g);var n=j.map(e);return l=c.slice(g),m=n.concat(l),{from:i,to:m,retained:j,retainedWithToParams:n,exiting:k,entering:l}},a.matching=function(a,b,c){var d=!1,e=A(a,b);return e.reduce(function(a,b){var e=b[0],f=b[1];return d=d||!e.equals(f,c),d?a:a.concat(e)},[])},a.equals=function(b,c,d){return b.length===c.length&&a.matching(b,c,d).length===b.length},a.subPath=function(a,b){var c=w(a,b),d=a.indexOf(c);return-1===d?void 0:a.slice(0,d+1)},a.nonDynamicParams=function(a){return a.state.parameters({inherit:!1}).filter(function(a){return!a.dynamic})},a.paramValues=function(a){return a.reduce(function(a,b){return pb(a,b.paramValues)},{})},a}(),fc={when:"LAZY",async:"WAIT"},gc=function(){function a(b,c,d,e,f){if(this.resolved=!1,this.promise=void 0,b instanceof a)pb(this,b);else if(_a(c)){if($a(b))throw new Error("new Resolvable(): token argument is required");if(!_a(c))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=b,this.policy=e,this.resolveFn=c,this.deps=d||[],this.data=f,this.resolved=void 0!==f,this.promise=this.resolved?jb.$q.when(this.data):void 0}else if(cb(b)&&b.token&&(b.hasOwnProperty("resolveFn")||b.hasOwnProperty("data"))){var g=b;return new a(g.token,g.resolveFn,g.deps,g.policy,g.data)}}return a.prototype.getPolicy=function(a){var b=this.policy||{},c=a&&a.resolvePolicy||{};return{when:b.when||c.when||fc.when,async:b.async||c.async||fc.async}},a.prototype.resolve=function(a,b){var c=this,d=jb.$q,e=function(){return d.all(a.getDependencies(c).map(function(c){return c.get(a,b)}))},f=function(a){return c.resolveFn.apply(null,a)},g=function(a){var b=a.cache(1);return b.take(1).toPromise().then(function(){return b})},h=a.findNode(this),i=h&&h.state,j="RXWAIT"===this.getPolicy(i).async?g:k,l=function(a){return c.data=a,c.resolved=!0,c.resolveFn=null,Vb.traceResolvableResolved(c,b),c.data};return this.promise=d.when().then(e).then(f).then(j).then(l)},a.prototype.get=function(a,b){return this.promise||this.resolve(a,b)},a.prototype.toString=function(){return"Resolvable(token: "+X(this.token)+", requires: ["+this.deps.map(X)+"])"},a.prototype.clone=function(){return new a(this)},a.fromData=function(b,c){return new a(b,function(){return c},null,null,c)},a}(),hc={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},ic=hc.when,jc=[ic.EAGER,ic.LAZY],kc=[ic.EAGER],lc="Native Injector",mc=function(){function a(a){this._path=a}return a.prototype.getTokens=function(){return this._path.reduce(function(a,b){return a.concat(b.resolvables.map(function(a){return a.token}))},[]).reduce(Db,[])},a.prototype.getResolvable=function(a){var b=this._path.map(function(a){return a.resolvables}).reduce(Bb,[]).filter(function(b){return b.token===a});return C(b)},a.prototype.getPolicy=function(a){var b=this.findNode(a);return a.getPolicy(b.state)},a.prototype.subContext=function(b){return new a(ec.subPath(this._path,function(a){return a.state===b}))},a.prototype.addResolvables=function(a,b){var c=w(this._path,La("state",b)),d=a.map(function(a){return a.token});c.resolvables=c.resolvables.filter(function(a){return-1===d.indexOf(a.token)}).concat(a)},a.prototype.resolvePath=function(a,b){var c=this;void 0===a&&(a="LAZY");var d=sb(jc,a)?a:"LAZY",e=d===hc.when.EAGER?kc:jc;Vb.traceResolvePath(this._path,a,b);var f=function(a,b){return function(d){return sb(a,c.getPolicy(d)[b])}},g=this._path.reduce(function(a,d){var g=d.resolvables.filter(f(e,"when")),h=g.filter(f(["NOWAIT"],"async")),i=g.filter(Na(f(["NOWAIT"],"async"))),j=c.subContext(d.state),k=function(a){return a.get(j,b).then(function(b){return{token:a.token,value:b}})};return h.forEach(k),a.concat(i.map(k))},[]);return jb.$q.all(g)},a.prototype.injector=function(){return this._injector||(this._injector=new nc(this))},a.prototype.findNode=function(a){return w(this._path,function(b){return sb(b.resolvables,a)})},a.prototype.getDependencies=function(a){var b=this,c=this.findNode(a),d=ec.subPath(this._path,function(a){return a===c})||this._path,e=d.reduce(function(a,b){return a.concat(b.resolvables)},[]).filter(function(b){return b!==a}),f=function(a){var c=e.filter(function(b){return b.token===a});if(c.length)return C(c);var d=b.injector().getNative(a);if(Xa(d))throw new Error("Could not find Dependency Injection token: "+X(a));return new gc(a,function(){return d},[],d)};return a.deps.map(f)},a}(),nc=function(){function a(a){this.context=a,this["native"]=this.get(lc)||jb.$injector}return a.prototype.get=function(a){var b=this.context.getResolvable(a);if(b){if("NOWAIT"===this.context.getPolicy(b).async)return b.get(this.context);if(!b.resolved)throw new Error("Resolvable async .get() not complete:"+X(b.token));return b.data}return this.getNative(a)},a.prototype.getAsync=function(a){var b=this.context.getResolvable(a);return b?b.get(this.context):jb.$q.when(this["native"].get(a))},a.prototype.getNative=function(a){return this["native"]&&this["native"].get(a)},a}(),oc=Ka("self"),pc=function(){function b(b,c,d){var e=this;if(this._deferred=jb.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new $b(this),this.isActive=function(){return e.router.globals.transition===e},this.router=d,this._targetState=c,!c.valid())throw new Error(c.error());this._options=pb({current:Sa(this)},c.options()),this.$id=d.transitionService._transitionCount++;var f=ec.buildToPath(b,c);this._treeChanges=ec.treeChanges(b,f,this._options.reloadState),this.createTransitionHookRegFns();var g=this._hookBuilder.buildHooksForPhase(a.TransitionHookPhase.CREATE);Yb.invokeHooks(g,function(){return null}),this.applyViewConfigs(d)}return b.prototype.onBefore=function(a,b,c){},b.prototype.onStart=function(a,b,c){},b.prototype.onExit=function(a,b,c){},b.prototype.onRetain=function(a,b,c){},b.prototype.onEnter=function(a,b,c){},b.prototype.onFinish=function(a,b,c){},b.prototype.onSuccess=function(a,b,c){},b.prototype.onError=function(a,b,c){},b.prototype.createTransitionHookRegFns=function(){var b=this;this.router.transitionService._pluginapi._getEvents().filter(function(b){return b.hookPhase!==a.TransitionHookPhase.CREATE}).forEach(function(a){return L(b,b.router.transitionService,a)})},b.prototype.getHooks=function(a){return this._registeredHooks[a]},b.prototype.applyViewConfigs=function(a){var b=this._treeChanges.entering.map(function(a){return a.state});ec.applyViewConfigs(a.transitionService.$view,this._treeChanges.to,b)},b.prototype.$from=function(){return C(this._treeChanges.from).state},b.prototype.$to=function(){return C(this._treeChanges.to).state},b.prototype.from=function(){return this.$from().self},b.prototype.to=function(){return this.$to().self},b.prototype.targetState=function(){return this._targetState},b.prototype.is=function(a){return a instanceof b?this.is({to:a.$to().name,from:a.$from().name}):!(a.to&&!K(this.$to(),a.to)||a.from&&!K(this.$from(),a.from))},b.prototype.params=function(a){return void 0===a&&(a="to"),Object.freeze(this._treeChanges[a].map(Ka("paramValues")).reduce(wb,{}))},b.prototype.injector=function(a,b){void 0===b&&(b="to");var c=this._treeChanges[b];return a&&(c=ec.subPath(c,function(b){return b.state===a||b.state.name===a})),new mc(c).injector()},b.prototype.getResolveTokens=function(a){return void 0===a&&(a="to"),new mc(this._treeChanges[a]).getTokens()},b.prototype.addResolvable=function(a,b){void 0===b&&(b=""),a=Qa(gc)(a)?a:new gc(a);var c="string"==typeof b?b:b.name,d=this._treeChanges.to,e=w(d,function(a){return a.state.name===c}),f=new mc(d);f.addResolvables([a],e.state)},b.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},b.prototype.originalTransition=function(){var a=this.redirectedFrom();return a&&a.originalTransition()||this},b.prototype.options=function(){return this._options},b.prototype.entering=function(){return x(this._treeChanges.entering,Ka("state")).map(oc)},b.prototype.exiting=function(){return x(this._treeChanges.exiting,Ka("state")).map(oc).reverse()},b.prototype.retained=function(){return x(this._treeChanges.retained,Ka("state")).map(oc)},b.prototype.views=function(a,b){void 0===a&&(a="entering");var c=this._treeChanges[a];return c=b?c.filter(La("state",b)):c,c.map(Ka("views")).filter(k).reduce(Bb,[])},b.prototype.treeChanges=function(a){return a?this._treeChanges[a]:this._treeChanges},b.prototype.redirect=function(a){for(var b=1,c=this;null!=(c=c.redirectedFrom());)if(++b>20)throw new Error("Too many consecutive Transition redirects (20+)");var d={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&a.options().location!==!1&&(d.location="replace");var e=pb({},this.options(),a.options(),d);a=a.withOptions(e,!0);var f=this.router.transitionService.create(this._treeChanges.from,a),g=this._treeChanges.entering,h=f._treeChanges.entering,i=function(a){return function(b){return a&&b.state.includes[a.name]}},j=ec.matching(h,g,ec.nonDynamicParams).filter(Na(i(a.options().reloadState)));return j.forEach(function(a,b){a.resolvables=g[b].resolvables}),f},b.prototype._changedParams=function(){var a=this._treeChanges;if(this._options.reload)return void 0;if(a.exiting.length||a.entering.length)return void 0;if(a.to.length!==a.from.length)return void 0;var b=A(a.to,a.from).map(function(a){return a[0].state!==a[1].state}).reduce(Ab,!1);if(b)return void 0;var c=a.to.map(function(a){return a.paramSchema}),d=[a.to,a.from].map(function(a){return a.map(function(a){return a.paramValues})}),e=d[0],f=d[1],g=A(c,e,f);return g.map(function(a){var b=a[0],c=a[1],d=a[2];return cc.changed(b,c,d)}).reduce(Bb,[])},b.prototype.dynamic=function(){var a=this._changedParams();return a?a.map(function(a){return a.dynamic}).reduce(Ab,!1):!1},b.prototype.ignored=function(){return!!this._ignoredReason()},b.prototype._ignoredReason=function(){var a=this.router.globals.transition,b=this._options.reloadState,c=function(a,c){if(a.length!==c.length)return!1;var d=ec.matching(a,c);return a.length===d.filter(function(a){return!b||!a.state.includes[b.name]}).length},d=this.treeChanges(),e=a&&a.treeChanges();return e&&c(e.to,d.to)&&c(e.exiting,d.exiting)?"SameAsPending":0===d.exiting.length&&0===d.entering.length&&c(d.from,d.to)?"SameAsCurrent":void 0},b.prototype.run=function(){var b=this,c=Yb.runAllHooks,d=function(a){return b._hookBuilder.buildHooksForPhase(a)},e=function(){Vb.traceSuccess(b.$to(),b),b.success=!0,b._deferred.resolve(b.to()),c(d(a.TransitionHookPhase.SUCCESS))},f=function(e){Vb.traceError(e,b),b.success=!1,b._deferred.reject(e),b._error=e,c(d(a.TransitionHookPhase.ERROR))},g=function(){var b=d(a.TransitionHookPhase.RUN),c=function(){return jb.$q.when(void 0)};return Yb.invokeHooks(b,c)},h=function(){var a=b.router.globals;return a.lastStartedTransitionId=b.$id,a.transition=b,a.transitionHistory.enqueue(b),Vb.traceTransitionStart(b),jb.$q.when(void 0)},i=d(a.TransitionHookPhase.BEFORE);return Yb.invokeHooks(i,h).then(g).then(e,f),this.promise},b.prototype.valid=function(){return!this.error()||void 0!==this.success},b.prototype.abort=function(){Xa(this.success)&&(this._aborted=!0)},b.prototype.error=function(){var a=this.$to();if(a.self["abstract"])return"Cannot transition to abstract state '"+a.name+"'";var b=a.parameters(),c=this.params(),d=b.filter(function(a){return!a.validates(c[a.id])});return d.length?"Param values not valid for state '"+a.name+"'. Invalid params: [ "+d.map(function(a){return a.id}).join(", ")+" ]":this.success===!1?this._error:void 0},b.prototype.toString=function(){var a=this.from(),b=this.to(),c=function(a){return null!==a["#"]&&void 0!==a["#"]?a:t(a,["#"])},d=this.$id,e=cb(a)?a.name:a,f=X(c(this._treeChanges.from.map(Ka("paramValues")).reduce(wb,{}))),g=this.valid()?"":"(X) ",h=cb(b)?b.name:b,i=X(c(this.params()));return"Transition#"+d+"( '"+e+"'"+f+" -> "+g+"'"+h+"'"+i+" )"},b.diToken=b,b}(),qc=null,rc=function(a){var b=Nb.isRejectionPromise;return(qc=qc||i([[Na(Ya),Sa("undefined")],[Za,Sa("null")],[hb,Sa("[Promise]")],[b,function(a){return a._transitionRejection.toString()}],[Qa(Nb),h("toString")],[Qa(pc),h("toString")],[Qa(gc),h("toString")],[j,V],[Sa(!0),k]]))(a)},sc=function(a){return function(b){if(!b)return["",""];var c=b.indexOf(a);return-1===c?[b,""]:[b.substr(0,c),b.substr(c+1)]}},tc=new RegExp("^(?:[a-z]+:)?//[^/]+/"),uc=function(a){return a.replace(/\/[^\/]*$/,"")},vc=sc("#"),wc=sc("?"),xc=sc("="),yc=function(a){return a?a.replace(/^#/,""):""},zc=function(){function a(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=s(a.prototype,["hash","string","query","path","int","bool","date","json","any"]);var b=function(a,b){return new _b(pb({name:b},a))};this.types=rb(x(this.defaultTypes,b),{})}return a.prototype.dispose=function(){this.types={}},a.prototype.type=function(a,b,c){if(!Ya(b))return this.types[a];if(this.types.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return this.types[a]=new _b(pb({name:a},b)),c&&(this.typeQueue.push({name:a,def:c}),this.enqueue||this._flushTypeQueue()),this},a.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var a=this.typeQueue.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");pb(this.types[a.name],jb.$injector.invoke(a.def))}},a}();$();var Ac,Bc=function(){function a(a){void 0===a&&(a={}),pb(this,a)}return a.prototype.$inherit=function(a,b,c){var d,e=r(b,c),f={},g=[];for(var h in e)if(e[h]&&e[h].params&&(d=Object.keys(e[h].params),d.length))for(var i in d)g.indexOf(d[i])>=0||(g.push(d[i]),f[d[i]]=this[d[i]]);return pb({},f,a)},a}(),Cc=function(a){if(!bb(a))return!1;var b="^"===a.charAt(0);return{val:b?a.substring(1):a,root:b}},Dc=function(a,b){return function(c){var d=c;d&&d.url&&d.name&&d.name.match(/\.\*\*$/)&&(d.url+="{remainder:any}");var e=Cc(d.url),f=c.parent,g=e?a.compile(e.val,{params:c.params||{},paramMap:function(a,b){return d.reloadOnSearch===!1&&b&&(a=pb(a||{},{dynamic:!0})),a}}):d.url;if(!g)return null;if(!a.isMatcher(g))throw new Error("Invalid url '"+g+"' in state '"+c+"'");return e&&e.root?g:(f&&f.navigable||b()).url.append(g)}},Ec=function(a){return function(b){return!a(b)&&b.url?b:b.parent?b.parent.navigable:null}},Fc=function(a){return function(b){var c=function(b,c){return a.fromConfig(c,null,b)},d=b.url&&b.url.parameters({inherit:!1})||[],e=yb(xb(t(b.params||{},d.map(Ka("id"))),c));return d.concat(e).map(function(a){return[a.id,a]}).reduce(B,{})}},Gc=function(){function a(a,b){function c(b){return f(b)?null:a.find(d.parentName(b))||e()}this.matcher=a;var d=this,e=function(){return a.find("")},f=function(a){return""===a.name};this.builders={name:[_],self:[aa],parent:[c],data:[ba],url:[Dc(b,e)],navigable:[Ec(f)],params:[Fc(b.paramFactory)],views:[],path:[ca],includes:[da],resolvables:[ea]}}return a.prototype.builder=function(a,b){var c=this.builders,d=c[a]||[];return bb(a)&&!Ya(b)?d.length>1?d:d[0]:bb(a)&&_a(b)?(c[a]=d,c[a].push(b),function(){return c[a].splice(c[a].indexOf(b,1))&&null}):void 0},a.prototype.build=function(a){var b=this,c=b.matcher,d=b.builders,e=this.parentName(a);if(e&&!c.find(e,void 0,!1))return null;for(var f in d)if(d.hasOwnProperty(f)){var g=d[f].reduce(function(a,b){return function(c){return b(c,a)}},l);a[f]=g(a)}return a},a.prototype.parentName=function(a){var b=a.name||"",c=b.split("."),d=c.pop();if("**"===d&&c.pop(),c.length){if(a.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+b+")");return c.join(".")}return a.parent?bb(a.parent)?a.parent:a.parent.name:""},a.prototype.name=function(a){var b=a.name;if(-1!==b.indexOf(".")||!a.parent)return b;var c=bb(a.parent)?a.parent:a.parent.name;return c?c+"."+b:b},a}(),Hc=function(){function a(a){this._states=a}return a.prototype.isRelative=function(a){return a=a||"",0===a.indexOf(".")||0===a.indexOf("^")},a.prototype.find=function(a,b,c){if(void 0===c&&(c=!0),!a&&""!==a)return void 0;var d=bb(a),e=d?a:a.name;this.isRelative(e)&&(e=this.resolvePath(e,b));var f=this._states[e];if(f&&(d||!(d||f!==a&&f.self!==a)))return f;if(d&&c){var g=yb(this._states),h=g.filter(function(a){return a.__stateObjectCache.nameGlob&&a.__stateObjectCache.nameGlob.matches(e)});return h.length>1&&console.log("stateMatcher.find: Found multiple matches for "+e+" using glob: ",h.map(function(a){return a.name})),h[0]}return void 0},a.prototype.resolvePath=function(a,b){if(!b)throw new Error("No reference point given for path '"+a+"'");for(var c=this.find(b),d=a.split("."),e=d.length,f=0,g=c;e>f;f++)if(""!==d[f]||0!==f){if("^"!==d[f])break;if(!g.parent)throw new Error("Path '"+a+"' not valid for state '"+c.name+"'");g=g.parent}else g=c;var h=d.slice(f).join(".");return g.name+(g.name&&h?".":"")+h},a}(),Ic=function(){function a(a,b,c,d,e){this.$registry=a,this.$urlRouter=b,this.states=c,this.builder=d,this.listeners=e,this.queue=[],this.matcher=a.matcher}return a.prototype.dispose=function(){this.queue=[]},a.prototype.register=function(a){var b=this.queue,c=Ua.create(a),d=c.name;if(!bb(d))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(d)||sb(b.map(Ka("name")),d))throw new Error("State '"+d+"' is already defined");return b.push(c),this.flush(),c},a.prototype.flush=function(){for(var a=this,b=this,c=b.queue,d=b.states,e=b.builder,f=[],g=[],h={},i=function(b){return a.states.hasOwnProperty(b)&&a.states[b]};c.length>0;){var j=c.shift(),k=j.name,l=e.build(j),m=g.indexOf(j);if(l){var n=i(k);if(n&&n.name===k)throw new Error("State '"+k+"' is already defined");var o=i(k+".**");o&&this.$registry.deregister(o),d[k]=j,this.attachRoute(j),m>=0&&g.splice(m,1),f.push(j)}else{var p=h[k];if(h[k]=c.length,m>=0&&p===c.length)return c.push(j),d;0>m&&g.push(j),c.push(j)}}return f.length&&this.listeners.forEach(function(a){return a("registered",f.map(function(a){return a.self}))}),d},a.prototype.attachRoute=function(a){!a["abstract"]&&a.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(a))},a}(),Jc=function(){function a(a){this._router=a,this.states={},this.listeners=[],this.matcher=new Hc(this.states),this.builder=new Gc(this.matcher,a.urlMatcherFactory),this.stateQueue=new Ic(this,a.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return a.prototype._registerRoot=function(){var a={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},"abstract":!0},b=this._root=this.stateQueue.register(a);b.navigable=null},a.prototype.dispose=function(){var a=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(b){return a.get(b)&&a.deregister(b)})},a.prototype.onStatesChanged=function(a){return this.listeners.push(a),function(){tb(this.listeners)(a)}.bind(this)},a.prototype.root=function(){return this._root},a.prototype.register=function(a){return this.stateQueue.register(a)},a.prototype._deregisterTree=function(a){var b=this,c=this.get().map(function(a){return a.$$state()}),d=function(a){var b=c.filter(function(b){return-1!==a.indexOf(b.parent)});return 0===b.length?b:b.concat(d(b))},e=d([a]),f=[a].concat(e).reverse();return f.forEach(function(a){var c=b._router.urlRouter;c.rules().filter(La("state",a)).forEach(c.removeRule.bind(c)),delete b.states[a.name]}),f},a.prototype.deregister=function(a){var b=this.get(a);if(!b)throw new Error("Can't deregister state; not found: "+a);var c=this._deregisterTree(b.$$state());return this.listeners.forEach(function(a){return a("deregistered",c.map(function(a){return a.self}))}),c},a.prototype.get=function(a,b){var c=this;if(0===arguments.length)return Object.keys(this.states).map(function(a){return c.states[a].self});var d=this.matcher.find(a,b);return d&&d.self||null},a.prototype.decorator=function(a,b){return this.builder.builder(a,b)},a}(),Kc=function(a,b,c){return a[b]=a[b]||c()},Lc=Y("/"),Mc=function(){function b(a,c,d,e){var f=this;this.config=e,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=a,this.config=q(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:k});for(var g,h,i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,m=[],n=0,o=function(c){if(!b.nameValidator.test(c))throw new Error("Invalid parameter name '"+c+"' in pattern '"+a+"'");if(w(f._params,La("id",c)))throw new Error("Duplicate parameter name '"+c+"' in pattern '"+a+"'")},p=function(b,d){var e=b[2]||b[3],g=d?b[4]:b[4]||("*"===b[1]?"[\\s\\S]*":null),h=function(a){return rb(c.type(d?"query":"path"),{pattern:new RegExp(a,f.config.caseInsensitive?"i":void 0)})};return{id:e,regexp:g,cfg:f.config.params[e],segment:a.substring(n,b.index),type:g?c.type(g)||h(g):null}};(g=j.exec(a))&&(h=p(g,!1),!(h.segment.indexOf("?")>=0));)o(h.id),this._params.push(d.fromPath(h.id,h.type,this.config.paramMap(h.cfg,!1))),this._segments.push(h.segment),m.push([h.segment,C(this._params)]),n=j.lastIndex;i=a.substring(n);var r=i.indexOf("?");if(r>=0){var s=i.substring(r);if(i=i.substring(0,r),s.length>0)for(n=0;g=l.exec(s);)h=p(g,!0),o(h.id),this._params.push(d.fromSearch(h.id,h.type,this.config.paramMap(h.cfg,!0))),n=j.lastIndex}this._segments.push(i),this._compiled=m.map(function(a){return fa.apply(null,a)}).concat(fa(i))}return b.encodeDashes=function(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})},b.pathSegmentsAndParams=function(b){var c=b._segments,d=b._params.filter(function(b){return b.location===a.DefType.PATH});return A(c,d.concat(void 0)).reduce(Bb,[]).filter(function(a){return""!==a&&Ya(a)})},b.queryParams=function(b){return b._params.filter(function(b){return b.location===a.DefType.SEARCH})},b.compare=function(a,c){var d=function(a){return a._cache.segments=a._cache.segments||a._cache.path.map(b.pathSegmentsAndParams).reduce(Bb,[]).reduce(Z,[]).map(function(a){return bb(a)?Lc(a):a}).reduce(Bb,[])},e=function(a){return a._cache.weights=a._cache.weights||d(a).map(function(a){return"/"===a?1:bb(a)?2:a instanceof cc?3:void 0})},f=function(a,b,c){for(var d=Math.max(a.length,b.length);a.length<d;)a.push(c);for(;b.length<d;)b.push(c)},g=e(a),h=e(c);f(g,h,0);var i,j,k=A(g,h);for(j=0;j<k.length;j++)if(i=k[j][0]-k[j][1],0!==i)return i;return 0},b.prototype.append=function(a){return this._children.push(a),a._cache={path:this._cache.path.concat(a),parent:this,pattern:null},a},b.prototype.isRoot=function(){return this._cache.path[0]===this},b.prototype.toString=function(){return this.pattern},b.prototype.exec=function(a,b,c,d){function e(a){var b=function(a){return a.split("").reverse().join("")},c=function(a){return a.replace(/\\-/g,"-")},d=b(a).split(/-(?!\\)/),e=x(d,b);return x(e,c).reverse()}var f=this;void 0===b&&(b={}),void 0===d&&(d={});var g=Kc(this._cache,"pattern",function(){return new RegExp(["^",Eb(f._cache.path.map(Ka("_compiled"))).join(""),f.config.strict===!1?"/?":"","$"].join(""),f.config.caseInsensitive?"i":void 0)}).exec(a);if(!g)return null;var h=this.parameters(),i=h.filter(function(a){return!a.isSearch()}),j=h.filter(function(a){return a.isSearch()}),k=this._cache.path.map(function(a){return a._segments.length-1}).reduce(function(a,b){return a+b}),l={};if(k!==g.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var m=0;k>m;m++){for(var n=i[m],o=g[m+1],p=0;p<n.replace.length;p++)n.replace[p].from===o&&(o=n.replace[p].to);o&&n.array===!0&&(o=e(o)),Ya(o)&&(o=n.type.decode(o)),l[n.id]=n.value(o)}return j.forEach(function(a){for(var c=b[a.id],d=0;d<a.replace.length;d++)a.replace[d].from===c&&(c=a.replace[d].to);Ya(c)&&(c=a.type.decode(c)),l[a.id]=a.value(c)}),c&&(l["#"]=c),l},b.prototype.parameters=function(a){return void 0===a&&(a={}),a.inherit===!1?this._params:Eb(this._cache.path.map(function(a){return a._params}))},b.prototype.parameter=function(a,b){var c=this;void 0===b&&(b={});var d=function(){for(var b=0,d=c._params;b<d.length;b++){var e=d[b];if(e.id===a)return e}},e=this._cache.parent;return d()||b.inherit!==!1&&e&&e.parameter(a,b)||null},b.prototype.validates=function(a){var b=function(a,b){return!a||a.validates(b)};a=a||{};
var c=this.parameters().filter(function(b){return a.hasOwnProperty(b.id)});return c.map(function(c){return b(c,a[c.id])}).reduce(zb,!0)},b.prototype.format=function(a){function c(b){var c=b.value(a[b.id]),d=b.validates(c),e=b.isDefaultValue(c),f=e?b.squash:!1,g=b.type.encode(c);return{param:b,value:c,isValid:d,isDefaultValue:e,squash:f,encoded:g}}void 0===a&&(a={});var d=this._cache.path,e=d.map(b.pathSegmentsAndParams).reduce(Bb,[]).map(function(a){return bb(a)?a:c(a)}),f=d.map(b.queryParams).reduce(Bb,[]).map(c),g=function(a){return a.isValid===!1};if(e.concat(f).filter(g).length)return null;var h=e.reduce(function(a,c){if(bb(c))return a+c;var d=c.squash,e=c.encoded,f=c.param;return d===!0?a.match(/\/$/)?a.slice(0,-1):a:bb(d)?a+d:d!==!1?a:null==e?a:db(e)?a+x(e,b.encodeDashes).join("-"):f.raw?a+e:a+encodeURIComponent(e)},""),i=f.map(function(a){var b=a.param,c=a.squash,d=a.encoded,e=a.isDefaultValue;if(!(null==d||e&&c!==!1)&&(db(d)||(d=[d]),0!==d.length))return b.raw||(d=x(d,encodeURIComponent)),d.map(function(a){return b.id+"="+a})}).filter(k).reduce(Bb,[]).join("&");return h+(i?"?"+i:"")+(a["#"]?"#"+a["#"]:"")},b.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,b}(),Nc=function(){function b(){var b=this;this.paramTypes=new zc,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.paramFactory={fromConfig:function(c,d,e){return new cc(c,d,e,a.DefType.CONFIG,b)},fromPath:function(c,d,e){return new cc(c,d,e,a.DefType.PATH,b)},fromSearch:function(c,d,e){return new cc(c,d,e,a.DefType.SEARCH,b)}},this._getConfig=function(a){return pb({strict:b._isStrictMode,caseInsensitive:b._isCaseInsensitive},a)},pb(this,{UrlMatcher:Mc,Param:cc})}return b.prototype.caseInsensitive=function(a){return this._isCaseInsensitive=Ya(a)?a:this._isCaseInsensitive},b.prototype.strictMode=function(a){return this._isStrictMode=Ya(a)?a:this._isStrictMode},b.prototype.defaultSquashPolicy=function(a){if(Ya(a)&&a!==!0&&a!==!1&&!bb(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Ya(a)?a:this._defaultSquashPolicy},b.prototype.compile=function(a,b){return new Mc(a,this.paramTypes,this.paramFactory,this._getConfig(b))},b.prototype.isMatcher=function(a){if(!cb(a))return!1;var b=!0;return ob(Mc.prototype,function(c,d){_a(c)&&(b=b&&Ya(a[d])&&_a(a[d]))}),b},b.prototype.type=function(a,b,c){var d=this.paramTypes.type(a,b,c);return Ya(b)?this:d},b.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},b.prototype.dispose=function(){this.paramTypes.dispose()},b}(),Oc=function(){function a(a){this.router=a}return a.prototype.compile=function(a){return this.router.urlMatcherFactory.compile(a)},a.prototype.create=function(a,b){var c=this,d=i([[bb,function(a){return d(c.compile(a))}],[Qa(Mc),function(a){return c.fromUrlMatcher(a,b)}],[gb,function(a){return c.fromState(a,c.router)}],[Qa(RegExp),function(a){return c.fromRegExp(a,b)}],[_a,function(a){return new Pc(a,b)}]]),e=d(a);if(!e)throw new Error("invalid 'what' in when()");return e},a.prototype.fromUrlMatcher=function(a,b){function c(b){var c=a.exec(b.path,b.search,b.hash);return a.validates(c)&&c}function d(b){var c=a.parameters().filter(function(a){return a.isOptional});if(!c.length)return 1e-6;var d=c.filter(function(a){return b[a.id]});return d.length/c.length}var e=b;bb(b)&&(b=this.router.urlMatcherFactory.compile(b)),Qa(Mc)(b)&&(e=function(a){return b.format(a)});var f={urlMatcher:a,matchPriority:d,type:"URLMATCHER"};return pb(new Pc(c,e),f)},a.prototype.fromState=function(a,b){var c=function(c){var d=b.stateService,e=b.globals;d.href(a,c)!==d.href(e.current,e.params)&&d.transitionTo(a,c,{inherit:!0,source:"url"})},d={state:a,type:"STATE"};return pb(this.fromUrlMatcher(a.url,c),d)},a.prototype.fromRegExp=function(a,b){if(a.global||a.sticky)throw new Error("Rule RegExp must not be global or sticky");var c=function(a){return b.replace(/\$(\$|\d{1,2})/,function(b,c){return a["$"===c?0:Number(c)]})},d=bb(b)?c:b,e=function(b){return a.exec(b.path)},f={regexp:a,type:"REGEXP"};return pb(new Pc(e,d),f)},a.isUrlRule=function(a){return a&&["type","match","handler"].every(function(b){return Ya(a[b])})},a}(),Pc=function(){function a(a,b){var c=this;this.match=a,this.type="RAW",this.matchPriority=function(a){return 0-c.$id},this.handler=b||k}return a}(),Qc=function(a,b){return(b.priority||0)-(a.priority||0)},Rc=function(a,b){var c={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(c[a.type]||0)-(c[b.type]||0)},Sc=function(a,b){return a.urlMatcher&&b.urlMatcher?Mc.compare(a.urlMatcher,b.urlMatcher):0},Tc=function(a,b){var c={STATE:!0,URLMATCHER:!0},d=c[a.type]&&c[b.type];return d?0:(a.$id||0)-(b.$id||0)};Ac=function(a,b){var c=Qc(a,b);return 0!==c?c:(c=Rc(a,b),0!==c?c:(c=Sc(a,b),0!==c?c:Tc(a,b)))};var Uc=function(){function a(b){this._sortFn=Ac,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=b,this.urlRuleFactory=new Oc(b),m(Sa(a.prototype),this,Sa(this))}return a.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},a.prototype.sort=function(a){this._rules=this.stableSort(this._rules,this._sortFn=a||this._sortFn),this._sorted=!0},a.prototype.ensureSorted=function(){this._sorted||this.sort()},a.prototype.stableSort=function(a,b){var c=a.map(function(a,b){return{elem:a,idx:b}});return c.sort(function(a,c){var d=b(a.elem,c.elem);return 0===d?a.idx-c.idx:d}),c.map(function(a){return a.elem})},a.prototype.match=function(a){var b=this;this.ensureSorted(),a=pb({path:"",search:{},hash:""},a);var c=this.rules();this._otherwiseFn&&c.push(this._otherwiseFn);for(var d,e=function(c){var d=c.match(a,b._router);return d&&{match:d,rule:c,weight:c.matchPriority(d)}},f=0;f<c.length&&(!d||0===this._sortFn(c[f],d.rule));f++){var g=e(c[f]);d=!d||g&&g.weight>d.weight?g:d}return d},a.prototype.sync=function(a){if(!a||!a.defaultPrevented){var b=this._router,c=b.urlService,d=b.stateService,e={path:c.path(),search:c.search(),hash:c.hash()},f=this.match(e),g=i([[bb,function(a){return c.url(a,!0)}],[Wb.isDef,function(a){return d.go(a.state,a.params,a.options)}],[Qa(Wb),function(a){return d.go(a.state(),a.params(),a.options())}]]);g(f&&f.rule.handler(f.match,e,b))}},a.prototype.listen=function(a){var b=this;return a!==!1?this._stopFn=this._stopFn||this._router.urlService.onChange(function(a){return b.sync(a)}):(this._stopFn&&this._stopFn(),void delete this._stopFn)},a.prototype.update=function(a){var b=this._router.locationService;return a?void(this.location=b.url()):void(b.url()!==this.location&&b.url(this.location,!0))},a.prototype.push=function(a,b,c){var d=c&&!!c.replace;this._router.urlService.url(a.format(b||{}),d)},a.prototype.href=function(a,b,c){var d=a.format(b);if(null==d)return null;c=c||{absolute:!1};var e=this._router.urlService.config,f=e.html5Mode();if(f||null===d||(d="#"+e.hashPrefix()+d),d=ga(d,f,c.absolute,e.baseHref()),!c.absolute||!d)return d;var g=!f&&d?"/":"",h=e.port(),i=80===h||443===h?"":":"+h;return[e.protocol(),"://",e.host(),i,g,d].join("")},a.prototype.rule=function(a){var b=this;if(!Oc.isUrlRule(a))throw new Error("invalid rule");return a.$id=this._id++,a.priority=a.priority||0,this._rules.push(a),this._sorted=!1,function(){return b.removeRule(a)}},a.prototype.removeRule=function(a){tb(this._rules,a)},a.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},a.prototype.otherwise=function(a){var b=ha(a);this._otherwiseFn=this.urlRuleFactory.create(Sa(!0),b),this._sorted=!1},a.prototype.initial=function(a){var b=ha(a),c=function(a,b){return 0===b.globals.transitionHistory.size()&&!!/^\/?$/.exec(a.path)};this.rule(this.urlRuleFactory.create(c,b))},a.prototype.when=function(a,b,c){var d=this.urlRuleFactory.create(a,b);return Ya(c&&c.priority)&&(d.priority=c.priority),this.rule(d),d},a.prototype.deferIntercept=function(a){void 0===a&&(a=!0),this.interceptDeferred=a},a}(),Vc=function(){function a(){var a=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return a._uiViews},_activeViewConfigs:function(){return a._viewConfigs},_onSync:function(b){return a._listeners.push(b),function(){return tb(a._listeners,b)}}}}return a.normalizeUIViewTarget=function(a,b){void 0===b&&(b="");var c=b.split("@"),d=c[0]||"$default",e=bb(c[1])?c[1]:"^",f=/^(\^(?:\.\^)*)\.(.*$)/.exec(d);f&&(e=f[1],d=f[2]),"!"===d.charAt(0)&&(d=d.substr(1),e="");var g=/^(\^(?:\.\^)*)$/;if(g.exec(e)){var h=e.split(".").reduce(function(a,b){return a.parent},a);e=h.name}else"."===e&&(e=a.name);return{uiViewName:d,uiViewContextAnchor:e}},a.prototype._rootViewContext=function(a){return this._rootContext=a||this._rootContext},a.prototype._viewConfigFactory=function(a,b){this._viewConfigFactories[a]=b},a.prototype.createViewConfig=function(a,b){var c=this._viewConfigFactories[b.$type];if(!c)throw new Error("ViewService: No view config factory registered for type "+b.$type);var d=c(a,b);return db(d)?d:[d]},a.prototype.deactivateViewConfig=function(a){Vb.traceViewServiceEvent("<- Removing",a),tb(this._viewConfigs,a)},a.prototype.activateViewConfig=function(a){Vb.traceViewServiceEvent("-> Registering",a),this._viewConfigs.push(a)},a.prototype.sync=function(){function b(a){var b=function(a){return a&&a.parent?b(a.parent)+1:1};return 1e4*a.fqn.split(".").length+b(a.creationContext)}function d(a){for(var b=a.viewDecl.$context,c=0;++c&&b.parent;)b=b.parent;return c}var e=this,f=this._uiViews.map(function(a){return[a.fqn,a]}).reduce(B,{}),g=c(function(a,b,c,d){return b*(a(c)-a(d))}),h=function(b){var c=e._viewConfigs.filter(a.matches(f,b));return c.length>1&&c.sort(g(d,-1)),{uiView:b,viewConfig:c[0]}},i=function(a){-1!==e._uiViews.indexOf(a.uiView)&&a.uiView.configUpdated(a.viewConfig)},j=this._uiViews.sort(g(b,1)).map(h),k=j.map(function(a){return a.viewConfig}),l=this._viewConfigs.filter(function(a){return!sb(k,a)}).map(function(a){return{uiView:void 0,viewConfig:a}});j.forEach(i);var m=j.concat(l);this._listeners.forEach(function(a){return a(m)}),Vb.traceViewSync(m)},a.prototype.registerUIView=function(a){Vb.traceViewServiceUIViewEvent("-> Registering",a);var b=this._uiViews,c=function(b){return b.fqn===a.fqn&&b.$type===a.$type};return b.filter(c).length&&Vb.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",a),b.push(a),this.sync(),function(){var c=b.indexOf(a);return-1===c?void Vb.traceViewServiceUIViewEvent("Tried removing non-registered uiView",a):(Vb.traceViewServiceUIViewEvent("<- Deregistering",a),void tb(b)(a))}},a.prototype.available=function(){return this._uiViews.map(Ka("fqn"))},a.prototype.active=function(){return this._uiViews.filter(Ka("$config")).map(Ka("name"))},a.matches=function(a,b){return function(c){if(b.$type!==c.viewDecl.$type)return!1;var d=c.viewDecl,e=d.$uiViewName.split("."),f=b.fqn.split(".");if(!qb(e,f.slice(0-e.length)))return!1;var g=1-e.length||void 0,h=f.slice(0,g).join("."),i=a[h].creationContext;return d.$uiViewContextAnchor===(i&&i.name)}},a}(),Wc=function(){function a(){this.params=new Bc,this.lastStartedTransitionId=-1,this.transitionHistory=new Lb([],1),this.successfulTransitions=new Lb([],1)}return a.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},a}(),Xc=function(a){return a.reduce(function(a,b){return a[b]=ib(b),a},{dispose:l})},Yc=["url","path","search","hash","onChange"],Zc=["port","protocol","host","baseHref","html5Mode","hashPrefix"],$c=["type","caseInsensitive","strictMode","defaultSquashPolicy"],_c=["sort","when","initial","otherwise","rules","rule","removeRule"],ad=["deferIntercept","listen","sync","match"],bd=function(){function a(a,b){void 0===b&&(b=!0),this.router=a,this.rules={},this.config={};var c=function(){return a.locationService};m(c,this,c,Yc,b);var d=function(){return a.locationConfig};m(d,this.config,d,Zc,b);var e=function(){return a.urlMatcherFactory};m(e,this.config,e,$c);var f=function(){return a.urlRouter};m(f,this.rules,f,_c),m(f,this,f,ad)}return a.prototype.url=function(a,b,c){},a.prototype.path=function(){},a.prototype.search=function(){},a.prototype.hash=function(){},a.prototype.onChange=function(a){},a.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},a.prototype.dispose=function(){},a.prototype.sync=function(a){},a.prototype.listen=function(a){},a.prototype.deferIntercept=function(a){},a.prototype.match=function(a){},a.locationServiceStub=Xc(Yc),a.locationConfigStub=Xc(Zc),a}(),cd=0,dd=function(){function a(a,b){void 0===a&&(a=bd.locationServiceStub),void 0===b&&(b=bd.locationConfigStub),this.locationService=a,this.locationConfig=b,this.$id=cd++,this._disposed=!1,this._disposables=[],this.trace=Vb,this.viewService=new Vc,this.globals=new Wc,this.transitionService=new Ld(this),this.urlMatcherFactory=new Nc,this.urlRouter=new Uc(this),this.stateRegistry=new Jc(this),this.stateService=new Md(this),this.urlService=new bd(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(a),this.disposable(b)}return a.prototype.disposable=function(a){this._disposables.push(a)},a.prototype.dispose=function(a){var b=this;return a&&_a(a.dispose)?void a.dispose(this):(this._disposed=!0,void this._disposables.slice().forEach(function(a){try{"function"==typeof a.dispose&&a.dispose(b),tb(b._disposables,a)}catch(c){}}))},a.prototype.plugin=function(a,b){void 0===b&&(b={});var c=new a(this,b);if(!c.name)throw new Error("Required property `name` missing on plugin: "+c);return this._disposables.push(c),this._plugins[c.name]=c},a.prototype.getPlugin=function(a){return a?this._plugins[a]:yb(this._plugins)},a}(),ed=function(a){return a.onCreate({},ia)},fd=["$transition$",pc],gd=sb(fd),hd=function(a){var b=yb(a.treeChanges()).reduce(Bb,[]).reduce(Db,[]),c=function(a){return gd(a.token)?gc.fromData(a.token,null):a};b.forEach(function(a){a.resolvables=a.resolvables.map(c)})},id=function(a){function b(b){return b?b instanceof Wb?b:bb(b)?d.target(b,a.params(),a.options()):b.state||b.params?d.target(b.state||a.to(),b.params||a.params(),a.options()):void 0:void 0}var c=a.to().redirectTo;if(c){var d=a.router.stateService;return _a(c)?jb.$q.when(c(a)).then(b):b(c)}},jd=function(a){return a.onStart({to:function(a){return!!a.redirectTo}},id)},kd=ja("onExit"),ld=function(a){return a.onExit({exiting:function(a){return!!a.onExit}},kd)},md=ja("onRetain"),nd=function(a){return a.onRetain({retained:function(a){return!!a.onRetain}},md)},od=ja("onEnter"),pd=function(a){return a.onEnter({entering:function(a){return!!a.onEnter}},od)},qd=1e3,rd=function(a){return new mc(a.treeChanges().to).resolvePath("EAGER",a).then(l)},sd=function(a){return a.onStart({},rd,{priority:qd})},td=function(a,b){return new mc(a.treeChanges().to).subContext(b.$$state()).resolvePath("LAZY",a).then(l)},ud=function(a){return a.onEnter({entering:Sa(!0)},td,{priority:qd})},vd=function(a){return new mc(a.treeChanges().to).resolvePath("LAZY",a).then(l)},wd=function(a){return a.onFinish({},vd,{priority:qd})},xd=function(a){var b=jb.$q,c=a.views("entering");return c.length?b.all(c.map(function(a){return b.when(a.load())})).then(l):void 0},yd=function(a){return a.onFinish({},xd)},zd=function(a){var b=a.views("entering"),c=a.views("exiting");if(b.length||c.length){var d=a.router.viewService;c.forEach(function(a){return d.deactivateViewConfig(a)}),b.forEach(function(a){return d.activateViewConfig(a)}),d.sync()}},Ad=function(a){return a.onSuccess({},zd)},Bd=function(a){var b=a.router.globals,c=function(){b.successfulTransitions.enqueue(a),b.$current=a.$to(),b.current=b.$current.self,D(a.params(),b.params)},d=function(){b.transition===a&&(b.transition=null)};a.onSuccess({},c,{priority:1e4}),a.promise.then(d,d)},Cd=function(a){return a.onCreate({},Bd)},Dd=function(a){var b=a.options(),c=a.router.stateService,d=a.router.urlRouter;if("url"!==b.source&&b.location&&c.$current.navigable){var e={replace:"replace"===b.location};d.push(c.$current.navigable.url,c.params,e)}d.update(!0)},Ed=function(a){return a.onSuccess({},Dd,{priority:9999})},Fd=function(a){function b(){if("url"!==a.originalTransition().options().source){var b=a.targetState();return c.stateService.target(b.identifier(),b.params(),b.options())}var d=c.urlService,e=d.match(d.parts()),f=e&&e.rule;if(f&&"STATE"===f.type){var g=f.state,h=e.match;return c.stateService.target(g,h,a.options())}c.urlService.sync()}var c=a.router,d=a.entering().filter(function(a){return!!a.$$state().lazyLoad}).map(function(b){return ka(a,b)});return jb.$q.all(d).then(b)},Gd=function(a){return a.onBefore({entering:function(a){return!!a.lazyLoad}},Fd)},Hd=function(){function a(a,b,c,d,e,f,g,h){void 0===e&&(e=!1),void 0===f&&(f=Yb.HANDLE_RESULT),void 0===g&&(g=Yb.REJECT_ERROR),void 0===h&&(h=!1),this.name=a,this.hookPhase=b,this.hookOrder=c,this.criteriaMatchPath=d,this.reverseSort=e,this.getResultHandler=f,this.getErrorHandler=g,this.synchronous=h}return a}(),Id=function(a){return a.onBefore({},la,{priority:-9999})},Jd=function(a){return a.onBefore({},ma,{priority:-1e4})},Kd={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},Ld=function(){function b(a){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=a,this.$view=a.viewService,this._deregisterHookFns={},this._pluginapi=m(Sa(this),{},Sa(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),a.globals.successfulTransitions.onEvict(hd)}return b.prototype.onCreate=function(a,b,c){},b.prototype.onBefore=function(a,b,c){},b.prototype.onStart=function(a,b,c){},b.prototype.onExit=function(a,b,c){},b.prototype.onRetain=function(a,b,c){},b.prototype.onEnter=function(a,b,c){},b.prototype.onFinish=function(a,b,c){},b.prototype.onSuccess=function(a,b,c){},b.prototype.onError=function(a,b,c){},b.prototype.dispose=function(a){yb(this._registeredHooks).forEach(function(a){return a.forEach(function(b){b._deregistered=!0,tb(a,b)})})},b.prototype.create=function(a,b){return new pc(a,b,this._router)},b.prototype._defineCoreEvents=function(){var b=a.TransitionHookPhase,c=Yb,d=this._criteriaPaths,e=!1,f=!0,g=!0;this._defineEvent("onCreate",b.CREATE,0,d.to,e,c.LOG_REJECTED_RESULT,c.THROW_ERROR,g),this._defineEvent("onBefore",b.BEFORE,0,d.to),this._defineEvent("onStart",b.RUN,0,d.to),this._defineEvent("onExit",b.RUN,100,d.exiting,f),this._defineEvent("onRetain",b.RUN,200,d.retained),this._defineEvent("onEnter",b.RUN,300,d.entering),this._defineEvent("onFinish",b.RUN,400,d.to),this._defineEvent("onSuccess",b.SUCCESS,0,d.to,e,c.LOG_REJECTED_RESULT,c.LOG_ERROR,g),this._defineEvent("onError",b.ERROR,0,d.to,e,c.LOG_REJECTED_RESULT,c.LOG_ERROR,g)},b.prototype._defineCorePaths=function(){var b=a.TransitionHookScope.STATE,c=a.TransitionHookScope.TRANSITION;this._definePathType("to",c),this._definePathType("from",c),this._definePathType("exiting",b),this._definePathType("retained",b),this._definePathType("entering",b)},b.prototype._defineEvent=function(a,b,c,d,e,f,g,h){void 0===e&&(e=!1),void 0===f&&(f=Yb.HANDLE_RESULT),void 0===g&&(g=Yb.REJECT_ERROR),void 0===h&&(h=!1);var i=new Hd(a,b,c,d,e,f,g,h);this._eventTypes.push(i),L(this,this,i)},b.prototype._getEvents=function(a){var b=Ya(a)?this._eventTypes.filter(function(b){return b.hookPhase===a}):this._eventTypes.slice();return b.sort(function(a,b){var c=a.hookPhase-b.hookPhase;return 0===c?a.hookOrder-b.hookOrder:c})},b.prototype._definePathType=function(a,b){this._criteriaPaths[a]={name:a,scope:b}},b.prototype._getPathTypes=function(){return this._criteriaPaths},b.prototype.getHooks=function(a){return this._registeredHooks[a]},b.prototype._registerCoreTransitionHooks=function(){var a=this._deregisterHookFns;a.addCoreResolves=ed(this),a.ignored=Id(this),a.invalid=Jd(this),a.redirectTo=jd(this),a.onExit=ld(this),a.onRetain=nd(this),a.onEnter=pd(this),a.eagerResolve=sd(this),a.lazyResolve=ud(this),a.resolveAll=wd(this),a.loadViews=yd(this),a.activateViews=Ad(this),a.updateGlobals=Cd(this),a.updateUrl=Ed(this),a.lazyLoad=Gd(this)},b}(),Md=function(){function b(a){this.router=a,this.invalidCallbacks=[],this._defaultErrorHandler=function(a){a instanceof Error&&a.stack?(console.error(a),console.error(a.stack)):a instanceof Nb?(console.error(a.toString()),a.detail&&a.detail.stack&&console.error(a.detail.stack)):console.error(a)};var c=["current","$current","params","transition"],d=Object.keys(b.prototype).filter(Na(sb(c)));m(Sa(b.prototype),this,Sa(this),d)}return Object.defineProperty(b.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),b.prototype.dispose=function(){this.defaultErrorHandler(l),this.invalidCallbacks=[]},b.prototype._handleInvalidTargetState=function(a,b){function c(){var a=i.dequeue();if(void 0===a)return Nb.invalid(b.error()).toPromise();var d=jb.$q.when(a(b,e,j));return d.then(k).then(function(a){return a||c()})}var d=this,e=ec.makeTargetState(this.router.stateRegistry,a),f=this.router.globals,g=function(){return f.transitionHistory.peekTail()},h=g(),i=new Lb(this.invalidCallbacks.slice()),j=new mc(a).injector(),k=function(a){if(a instanceof Wb){var b=a;return b=d.target(b.identifier(),b.params(),b.options()),b.valid()?g()!==h?Nb.superseded().toPromise():d.transitionTo(b.identifier(),b.params(),b.options()):Nb.invalid(b.error()).toPromise()}};return c()},b.prototype.onInvalid=function(a){return this.invalidCallbacks.push(a),function(){tb(this.invalidCallbacks)(a)}.bind(this)},b.prototype.reload=function(a){return this.transitionTo(this.current,this.params,{reload:Ya(a)?a:!0,inherit:!1,notify:!1})},b.prototype.go=function(a,b,c){var d={relative:this.$current,inherit:!0},e=q(c,d,Kd);return this.transitionTo(a,b,e)},b.prototype.target=function(a,b,c){if(void 0===c&&(c={}),cb(c.reload)&&!c.reload.name)throw new Error("Invalid reload state object");var d=this.router.stateRegistry;if(c.reloadState=c.reload===!0?d.root():d.matcher.find(c.reload,c.relative),c.reload&&!c.reloadState)throw new Error("No such reload state '"+(bb(c.reload)?c.reload:c.reload.name)+"'");return new Wb(this.router.stateRegistry,a,b,c)},b.prototype.getCurrentPath=function(){var a=this,b=this.router.globals,c=b.successfulTransitions.peekTail(),d=function(){return[new dc(a.router.stateRegistry.root())]};return c?c.treeChanges().to:d()},b.prototype.transitionTo=function(b,c,d){var e=this;void 0===c&&(c={}),void 0===d&&(d={});var f=this.router,g=f.globals;d=q(d,Kd);var h=function(){return g.transition};d=pb(d,{current:h});var i=this.target(b,c,d),j=this.getCurrentPath();if(!i.exists())return this._handleInvalidTargetState(j,i);if(!i.valid())return Kb(i.error());var k=function(b){return function(c){if(c instanceof Nb){var d=f.globals.lastStartedTransitionId===b.$id;if(c.type===a.RejectType.IGNORED)return d&&f.urlRouter.update(),jb.$q.when(g.current);var h=c.detail;if(c.type===a.RejectType.SUPERSEDED&&c.redirected&&h instanceof Wb){var i=b.redirect(h);return i.run()["catch"](k(i))}if(c.type===a.RejectType.ABORTED)return d&&f.urlRouter.update(),jb.$q.reject(c)}var j=e.defaultErrorHandler();return j(c),jb.$q.reject(c)}},l=this.router.transitionService.create(j,i),m=l.run()["catch"](k(l));return Jb(m),pb(m,{transition:l})},b.prototype.is=function(a,b,c){c=q(c,{relative:this.$current});var d=this.router.stateRegistry.matcher.find(a,c.relative);if(!Ya(d))return void 0;if(this.$current!==d)return!1;if(!b)return!0;var e=d.parameters({inherit:!0,matchingKeys:b});return cc.equals(e,cc.values(e,b),this.params)},b.prototype.includes=function(a,b,c){c=q(c,{relative:this.$current});var d=bb(a)&&Ta.fromString(a);if(d){if(!d.matches(this.$current.name))return!1;a=this.$current.name}var e=this.router.stateRegistry.matcher.find(a,c.relative),f=this.$current.includes;if(!Ya(e))return void 0;if(!Ya(f[e.name]))return!1;if(!b)return!0;var g=e.parameters({inherit:!0,matchingKeys:b});return cc.equals(g,cc.values(g,b),this.params)},b.prototype.href=function(a,b,c){var d={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};c=q(c,d),b=b||{};var e=this.router.stateRegistry.matcher.find(a,c.relative);if(!Ya(e))return null;c.inherit&&(b=this.params.$inherit(b,this.$current,e));var f=e&&c.lossy?e.navigable:e;return f&&void 0!==f.url&&null!==f.url?this.router.urlRouter.href(f.url,b,{absolute:c.absolute}):null},b.prototype.defaultErrorHandler=function(a){return this._defaultErrorHandler=a||this._defaultErrorHandler},b.prototype.get=function(a,b){var c=this.router.stateRegistry;return 0===arguments.length?c.get():c.get(a,b||this.$current)},b.prototype.lazyLoad=function(a,b){var c=this.get(a);if(!c||!c.lazyLoad)throw new Error("Can not lazy load "+a);var d=this.getCurrentPath(),e=ec.makeTargetState(this.router.stateRegistry,d);return b=b||this.router.transitionService.create(d,e),ka(b,c)},b}(),Nd={when:function(a){return new Promise(function(b,c){return b(a)})},reject:function(a){return new Promise(function(b,c){c(a)})},defer:function(){var a={};return a.promise=new Promise(function(b,c){a.resolve=b,a.reject=c}),a},all:function(a){if(db(a))return Promise.all(a);if(cb(a)){var b=Object.keys(a).map(function(b){return a[b].then(function(a){return{key:b,val:a}})});return Nd.all(b).then(function(a){return a.reduce(function(a,b){return a[b.key]=b.val,a},{})})}}},Od={},Pd=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Qd=/([^\s,]+)/g,Rd={get:function(a){return Od[a]},has:function(a){return null!=Rd.get(a)},invoke:function(a,b,c){var d=pb({},Od,c||{}),e=Rd.annotate(a),f=Gb(function(a){return d.hasOwnProperty(a)},function(a){return"DI can't find injectable: '"+a+"'"}),g=e.filter(f).map(function(a){return d[a]});return _a(a)?a.apply(b,g):a.slice(-1)[0].apply(b,g)},annotate:function(a){if(!j(a))throw new Error("Not an injectable function: "+a);if(a&&a.$inject)return a.$inject;if(db(a))return a.slice(0,-1);var b=a.toString().replace(Pd,""),c=b.slice(b.indexOf("(")+1,b.indexOf(")")).match(Qd);return c||[]}},Sd=function(a,b){var c=b[0],d=b[1];return a.hasOwnProperty(c)?db(a[c])?a[c].push(d):a[c]=[a[c],d]:a[c]=d,a},Td=function(a){return a.split("&").filter(k).map(xc).reduce(Sd,{})},Ud=function(a){var b=a.path(),c=a.search(),d=a.hash(),e=Object.keys(c).map(function(a){var b=c[a],d=db(b)?b:[b];return d.map(function(b){return a+"="+b})}).reduce(Bb,[]).join("&");return b+(e?"?"+e:"")+(d?"#"+d:"")},Vd=function(){function a(a,b){var c=this;this.fireAfterUpdate=b,this._listeners=[],this._listener=function(a){return c._listeners.forEach(function(b){return b(a)})},this.hash=function(){return na(c._get()).hash},this.path=function(){return na(c._get()).path},this.search=function(){return Td(na(c._get()).search)},this._location=kb.location,this._history=kb.history}return a.prototype.url=function(a,b){return void 0===b&&(b=!0),Ya(a)&&a!==this._get()&&(this._set(null,null,a,b),this.fireAfterUpdate&&this._listeners.forEach(function(b){return b({url:a})})),Ud(this)},a.prototype.onChange=function(a){var b=this;return this._listeners.push(a),function(){return tb(b._listeners,a)}},a.prototype.dispose=function(a){vb(this._listeners)},a}(),Wd=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Xd=function(a){function b(b){var c=a.call(this,b,!1)||this;return kb.addEventListener("hashchange",c._listener,!1),c}return Wd(b,a),b.prototype._get=function(){return yc(this._location.hash)},b.prototype._set=function(a,b,c,d){this._location.hash=c},b.prototype.dispose=function(b){a.prototype.dispose.call(this,b),kb.removeEventListener("hashchange",this._listener)},b}(Vd),Yd=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Zd=function(a){function b(b){return a.call(this,b,!0)||this}return Yd(b,a),b.prototype._get=function(){return this._url},b.prototype._set=function(a,b,c,d){this._url=c},b}(Vd),$d=function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),_d=function(a){function b(b){var c=a.call(this,b,!0)||this;return c._config=b.urlService.config,kb.addEventListener("popstate",c._listener,!1),c}return $d(b,a),b.prototype._getBasePrefix=function(){return uc(this._config.baseHref())},b.prototype._get=function(){var a=this._location,b=a.pathname,c=a.hash,d=a.search;d=wc(d)[1],c=vc(c)[1];var e=this._getBasePrefix(),f=b===this._config.baseHref(),g=b.substr(0,e.length)===e;return b=f?"/":g?b.substring(e.length):b,b+(d?"?"+d:"")+(c?"#"+c:"")},b.prototype._set=function(a,b,c,d){var e=this._getBasePrefix(),f=c&&"/"!==c[0]?"/":"",g=""===c||"/"===c?this._config.baseHref():e+f+c;d?this._history.replaceState(a,b,g):this._history.pushState(a,b,g)},b.prototype.dispose=function(b){a.prototype.dispose.call(this,b),kb.removeEventListener("popstate",this._listener)},b}(Vd),ae=function(){function a(){var a=this;this.dispose=l,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return a._port},this.protocol=function(){return a._protocol},this.host=function(){return a._host},this.baseHref=function(){return a._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(b){return Ya(b)?a._hashPrefix=b:a._hashPrefix}}return a}(),be=function(){function a(a,b){void 0===b&&(b=!1),this._isHtml5=b,this._baseHref=void 0,this._hashPrefix=""}return a.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},a.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},a.prototype.host=function(){return location.hostname},a.prototype.html5Mode=function(){return this._isHtml5},a.prototype.hashPrefix=function(a){return Ya(a)?this._hashPrefix=a:this._hashPrefix},a.prototype.baseHref=function(a){return Ya(a)?this._baseHref=a:Ya(this._baseHref)?this._baseHref:this.applyDocumentBaseHref()},a.prototype.applyDocumentBaseHref=function(){var a=document.getElementsByTagName("base")[0];return this._baseHref=a?a.href.substr(location.origin.length):location.pathname||"/"},a.prototype.dispose=function(){},a}(),ce=oa("vanilla.hashBangLocation",!1,Xd,be),de=oa("vanilla.pushStateLocation",!0,_d,be),ee=oa("vanilla.memoryLocation",!1,Zd,ae),fe=function(){function a(){}return a.prototype.dispose=function(a){},a}(),ge=Object.freeze({root:kb,fromJson:mb,toJson:nb,forEach:ob,extend:pb,equals:qb,identity:k,noop:l,createProxyFunctions:m,inherit:rb,inArray:sb,_inArray:n,removeFrom:tb,_removeFrom:o,pushTo:ub,_pushTo:p,deregAll:vb,defaults:q,mergeR:wb,ancestors:r,
pick:s,omit:t,pluck:u,filter:v,find:w,mapObj:xb,map:x,values:yb,allTrueR:zb,anyTrueR:Ab,unnestR:Bb,flattenR:Cb,pushR:y,uniqR:Db,unnest:Eb,flatten:Fb,assertPredicate:Gb,assertMap:Hb,assertFn:z,pairs:Ib,arrayTuples:A,applyPairs:B,tail:C,copy:D,_extend:F,silenceUncaughtInPromise:Jb,silentRejection:Kb,notImplemented:ib,services:jb,Glob:Ta,curry:c,compose:d,pipe:e,prop:Ka,propEq:La,parse:Ma,not:Na,and:f,or:g,all:Oa,any:Pa,is:Qa,eq:Ra,val:Sa,invoke:h,pattern:i,isUndefined:Xa,isDefined:Ya,isNull:Za,isNullOrUndefined:$a,isFunction:_a,isNumber:ab,isString:bb,isObject:cb,isArray:db,isDate:eb,isRegExp:fb,isState:gb,isInjectable:j,isPromise:hb,Queue:Lb,maxLength:S,padString:T,kebobString:U,functionToString:V,fnToString:W,stringify:X,beforeAfterSubstr:sc,hostRegex:tc,stripLastPathElement:uc,splitHash:vc,splitQuery:wc,splitEqual:xc,trimHashVal:yc,splitOnDelim:Y,joinNeighborsR:Z,get Category(){return a.Category},Trace:Ub,trace:Vb,get DefType(){return a.DefType},Param:cc,ParamTypes:zc,StateParams:Bc,ParamType:_b,PathNode:dc,PathUtils:ec,resolvePolicies:hc,defaultResolvePolicy:fc,Resolvable:gc,NATIVE_INJECTOR_TOKEN:lc,ResolveContext:mc,resolvablesBuilder:ea,StateBuilder:Gc,StateObject:Ua,StateMatcher:Hc,StateQueueManager:Ic,StateRegistry:Jc,StateService:Md,TargetState:Wb,get TransitionHookPhase(){return a.TransitionHookPhase},get TransitionHookScope(){return a.TransitionHookScope},HookBuilder:$b,matchState:K,RegisteredHook:Zb,makeEvent:L,get RejectType(){return a.RejectType},Rejection:Nb,Transition:pc,TransitionHook:Yb,TransitionEventType:Hd,defaultTransOpts:Kd,TransitionService:Ld,UrlMatcher:Mc,UrlMatcherFactory:Nc,UrlRouter:Uc,UrlRuleFactory:Oc,BaseUrlRule:Pc,UrlService:bd,ViewService:Vc,UIRouterGlobals:Wc,UIRouter:dd,$q:Nd,$injector:Rd,BaseLocationServices:Vd,HashLocationService:Xd,MemoryLocationService:Zd,PushStateLocationService:_d,MemoryLocationConfig:ae,BrowserLocationConfig:be,keyValsToObjectR:Sd,getParams:Td,parseUrl:na,buildUrl:Ud,locationPluginFactory:oa,servicesPlugin:pa,hashLocationPlugin:ce,pushStateLocationPlugin:de,memoryLocationPlugin:ee,UIRouterPluginBase:fe}),he=function(a,b){return a.reduce(function(a,c){return a||Ya(b[c])},!1)},ie=0,je=function(){function a(a,b,c){var d=this;this.path=a,this.viewDecl=b,this.factory=c,this.$id=ie++,this.loaded=!1,this.getTemplate=function(a,b){return d.component?d.factory.makeComponentTemplate(a,b,d.component,d.viewDecl.bindings):d.template}}return a.prototype.load=function(){var a=this,b=jb.$q,c=new mc(this.path),d=this.path.reduce(function(a,b){return pb(a,b.paramValues)},{}),e={template:b.when(this.factory.fromConfig(this.viewDecl,d,c)),controller:b.when(this.getController(c))};return b.all(e).then(function(b){return Vb.traceViewServiceEvent("Loaded",a),a.controller=b.controller,pb(a,b.template),a})},a.prototype.getController=function(a){var b=this.viewDecl.controllerProvider;if(!j(b))return this.viewDecl.controller;var c=jb.$injector.annotate(b),d=db(b)?C(b):b,e=new gc("",d,c);return e.get(a)},a}(),ke=function(){function a(){var a=this;this._useHttp=Ja.version.minor<3,this.$get=["$http","$templateCache","$injector",function(b,c,d){return a.$templateRequest=d.has&&d.has("$templateRequest")&&d.get("$templateRequest"),a.$http=b,a.$templateCache=c,a}]}return a.prototype.useHttpService=function(a){this._useHttp=a},a.prototype.fromConfig=function(a,b,c){var d="<ui-view></ui-view>",e=function(a){return jb.$q.when(a).then(function(a){return{template:a}})},f=function(a){return jb.$q.when(a).then(function(a){return{component:a}})};return Ya(a.template)?e(this.fromString(a.template,b)):Ya(a.templateUrl)?e(this.fromUrl(a.templateUrl,b)):Ya(a.templateProvider)?e(this.fromProvider(a.templateProvider,b,c)):Ya(a.component)?f(a.component):Ya(a.componentProvider)?f(this.fromComponentProvider(a.componentProvider,b,c)):e(d)},a.prototype.fromString=function(a,b){return _a(a)?a(b):a},a.prototype.fromUrl=function(a,b){return _a(a)&&(a=a(b)),null==a?null:this._useHttp?this.$http.get(a,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(a){return a.data}):this.$templateRequest(a)},a.prototype.fromProvider=function(a,b,c){var d=jb.$injector.annotate(a),e=db(a)?C(a):a,f=new gc("",e,d);return f.get(c)},a.prototype.fromComponentProvider=function(a,b,c){var d=jb.$injector.annotate(a),e=db(a)?C(a):a,f=new gc("",e,d);return f.get(c)},a.prototype.makeComponentTemplate=function(a,b,c,d){d=d||{};var e=Ja.version.minor>=3?"::":"",f=function(a){var b=U(a);return/^(x|data)-/.exec(b)?"x-"+b:b},g=function(c){var g=c.name,h=c.type,i=f(g);if(a.attr(i)&&!d[g])return i+"='"+a.attr(i)+"'";var j=d[g]||g;if("@"===h)return i+"='{{"+e+"$resolve."+j+"}}'";if("&"===h){var k=b.getResolvable(j),l=k&&k.data,m=l&&jb.$injector.annotate(l)||[],n=db(l)?"["+(l.length-1)+"]":"";return i+"='$resolve."+j+n+"("+m.join(",")+")'"}return i+"='"+e+"$resolve."+j+"'"},h=sa(c).map(g).join(" "),i=f(c);return"<"+i+" "+h+"></"+i+">"},a}(),le=function(a){return me(cb(a.bindToController)?a.bindToController:a.scope)},me=function(a){return Object.keys(a||{}).map(function(b){return[b,/^([=<@&])[?]?(.*)/.exec(a[b])]}).filter(function(a){return Ya(a)&&db(a[1])}).map(function(a){return{name:a[1][2]||a[0],type:a[1][1]}})},ne=function(){function a(b,c){this.stateRegistry=b,this.stateService=c,m(Sa(a.prototype),this,Sa(this))}return a.prototype.decorator=function(a,b){return this.stateRegistry.decorator(a,b)||this},a.prototype.state=function(a,b){return cb(a)?b=a:b.name=a,this.stateRegistry.register(b),this},a.prototype.onInvalid=function(a){return this.stateService.onInvalid(a)},a}(),oe=function(a){return function(b,c){function d(a,b){var c=new mc(a.treeChanges(f)),d=c.subContext(b.$$state()),g=pb(Be(d),{$state$:b,$transition$:a});return jb.$injector.invoke(e,this,g)}var e=b[a],f="onExit"===a?"from":"to";return e?d:void 0}},pe=function(){function a(a){this._urlListeners=[],this.$locationProvider=a;var b=Sa(a);m(b,this,b,["hashPrefix"])}return a.monkeyPatchPathParameterType=function(a){var b=a.urlMatcherFactory.type("path");b.encode=function(a){return null!=a?a.toString().replace(/(~|\/)/g,function(a){return{"~":"~~","/":"~2F"}[a]}):a},b.decode=function(a){return null!=a?a.toString().replace(/(~~|~2F)/g,function(a){return{"~~":"~","~2F":"/"}[a]}):a}},a.prototype.dispose=function(){},a.prototype.onChange=function(a){var b=this;return this._urlListeners.push(a),function(){return tb(b._urlListeners)(a)}},a.prototype.html5Mode=function(){var a=this.$locationProvider.html5Mode();return a=cb(a)?a.enabled:a,a&&this.$sniffer.history},a.prototype.url=function(a,b,c){return void 0===b&&(b=!1),Ya(a)&&this.$location.url(a),b&&this.$location.replace(),c&&this.$location.state(c),this.$location.url()},a.prototype._runtimeServices=function(a,b,c,d){var e=this;this.$location=b,this.$sniffer=c,a.$on("$locationChangeSuccess",function(a){return e._urlListeners.forEach(function(b){return b(a)})});var f=Sa(b),g=Sa(d);m(f,this,f,["replace","path","search","hash"]),m(f,this,f,["port","protocol","host"]),m(g,this,g,["baseHref"])},a}(),qe=function(){function a(a){this._router=a,this._urlRouter=a.urlRouter}return a.injectableHandler=function(a,b){return function(c){return jb.$injector.invoke(b,null,{$match:c,$stateParams:a.globals.params})}},a.prototype.$get=function(){var a=this._urlRouter;return a.update(!0),a.interceptDeferred||a.listen(),a},a.prototype.rule=function(a){var b=this;if(!_a(a))throw new Error("'rule' must be a function");var c=function(){return a(jb.$injector,b._router.locationService)},d=new Pc(c,k);return this._urlRouter.rule(d),this},a.prototype.otherwise=function(a){var b=this,c=this._urlRouter;if(bb(a))c.otherwise(a);else{if(!_a(a))throw new Error("'rule' must be a string or function");c.otherwise(function(){return a(jb.$injector,b._router.locationService)})}return this},a.prototype.when=function(b,c){return(db(c)||_a(c))&&(c=a.injectableHandler(this._router,c)),this._urlRouter.when(b,c),this},a.prototype.deferIntercept=function(a){this._urlRouter.deferIntercept(a)},a}();Ja.module("ui.router.angular1",[]);var re=Ja.module("ui.router.init",[]),se=Ja.module("ui.router.util",["ng","ui.router.init"]),te=Ja.module("ui.router.router",["ui.router.util"]),ue=Ja.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),ve=Ja.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),we=(Ja.module("ui.router.compat",["ui.router"]),null);ta.$inject=["$locationProvider"];var xe=function(a){return["$uiRouterProvider",function(b){var c=b.router[a];return c.$get=function(){return c},c}]};ua.$inject=["$injector","$q","$uiRouter"];var ye=function(a){return a.urlRouterProvider=new qe(a)},ze=function(){return pb(we.stateProvider,{$get:function(){return we.stateService}})};va.$inject=["$rootScope"],re.provider("$uiRouter",ta),te.provider("$urlRouter",["$uiRouterProvider",ye]),se.provider("$urlService",xe("urlService")),se.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return we.urlMatcherFactory}]),se.provider("$templateFactory",function(){return new ke}),ue.provider("$stateRegistry",xe("stateRegistry")),ue.provider("$uiRouterGlobals",xe("globals")),ue.provider("$transitions",xe("transitionService")),ue.provider("$state",["$uiRouterProvider",ze]),ue.factory("$stateParams",["$uiRouter",function(a){return a.globals.params}]),ve.factory("$view",function(){return we.viewService}),ve.service("$trace",function(){return Vb}),ve.run(va),se.run(["$urlMatcherFactory",function(a){}]),ue.run(["$state",function(a){}]),te.run(["$urlRouter",function(a){}]),re.run(ua);var Ae,Be=function(a){var b=a.getTokens().filter(bb),c=b.map(function(b){var c=a.getResolvable(b),d=a.getPolicy(c).async;return[b,"NOWAIT"===d?c.promise:c.data]});return c.reduce(B,{})};Ae=["$uiRouter","$timeout",function(a,b){var c=a.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(d,e,f,g){function h(){var a=n();l&&l(),k&&(l=k.$$addStateInfo(a.uiState,a.uiStateParams)),null!=a.href&&f.$set(j.attr,a.href)}var i,j=za(e),k=g[1]||g[0],l=null,m={},n=function(){return ya(c,e,m)},o=wa(f.uiSref);m.uiState=o.state,m.uiStateOpts=f.uiSrefOpts?d.$eval(f.uiSrefOpts):{},o.paramExpr&&(d.$watch(o.paramExpr,function(a){m.uiStateParams=pb({},a),h()},!0),m.uiStateParams=pb({},d.$eval(o.paramExpr))),h(),d.$on("$destroy",a.stateRegistry.onStatesChanged(h)),d.$on("$destroy",a.transitionService.onSuccess({},h)),j.clickable&&(i=Aa(e,c,b,j,n),Ca(e,d,i,m.uiStateOpts))}}}];var Ce;Ce=["$uiRouter","$timeout",function(a,b){var c=a.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(d,e,f,g){function h(){var a=o();m&&m(),k&&(m=k.$$addStateInfo(a.uiState,a.uiStateParams)),null!=a.href&&f.$set(j.attr,a.href)}var i,j=za(e),k=g[1]||g[0],m=null,n={},o=function(){return ya(c,e,n)},p=["uiState","uiStateParams","uiStateOpts"],q=p.reduce(function(a,b){return a[b]=l,a},{});p.forEach(function(a){n[a]=f[a]?d.$eval(f[a]):null,f.$observe(a,function(b){q[a](),q[a]=d.$watch(b,function(b){n[a]=b,h()},!0)})}),h(),d.$on("$destroy",a.stateRegistry.onStatesChanged(h)),d.$on("$destroy",a.transitionService.onSuccess({},h)),j.clickable&&(i=Aa(e,c,b,j,o),Ca(e,d,i,n.uiStateOpts))}}}];var De;De=["$state","$stateParams","$interpolate","$uiRouter",function(a,b,c,d){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,e,f){function g(a){a.promise.then(n,l)}function h(){var a=d.stateRegistry.onStatesChanged(i),c=d.transitionService.onStart({},g),e=b.$on("$stateChangeSuccess",n);return function(){a(),c(),e()}}function i(){j(p)}function j(a){cb(a)&&(q=[],ob(a,function(a,c){var d=function(a,c){var d=wa(a);m(d.state,b.$eval(d.paramExpr),c)};bb(a)?d(a,c):db(a)&&ob(a,function(a){d(a,c)})}))}function m(b,c,d){var f=a.get(b,xa(e)),g={state:f||{name:b},params:c,activeClass:d};return q.push(g),function(){tb(q)(g)}}function n(){var c=function(a){return a.split(/\s/).filter(k)},d=function(a){return a.map(function(a){return a.activeClass}).map(c).reduce(Bb,[])},f=d(q).concat(c(o)).reduce(Db,[]),g=d(q.filter(function(b){return a.includes(b.state.name,b.params)})),h=!!q.filter(function(b){return a.is(b.state.name,b.params)}).length,i=h?c(o):[],j=g.concat(i).reduce(Db,[]),l=f.filter(function(a){return!sb(j,a)});b.$evalAsync(function(){j.forEach(function(a){return e.addClass(a)}),l.forEach(function(a){return e.removeClass(a)})})}var o,p,q=[];o=c(f.uiSrefActiveEq||"",!1)(b);try{p=b.$eval(f.uiSrefActive)}catch(r){}p=p||c(f.uiSrefActive||"",!1)(b),j(p),this.$$addStateInfo=function(a,b){if(!(cb(p)&&q.length>0)){var c=m(a,b,p);return n(),c}},b.$on("$destroy",h()),d.globals.transition&&g(d.globals.transition),n()}]}}],Ja.module("ui.router.state").directive("uiSref",Ae).directive("uiSrefActive",De).directive("uiSrefActiveEq",De).directive("uiState",Ce),Da.$inject=["$state"],Ea.$inject=["$state"],Ja.module("ui.router.state").filter("isState",Da).filter("includedByState",Ea);var Ee;Ee=["$view","$animate","$uiViewScroll","$interpolate","$q",function(a,b,c,d,e){function f(a,c){return{enter:function(a,c,d){Ja.version.minor>2?b.enter(a,null,c).then(d):b.enter(a,null,c,d)},leave:function(a,c){Ja.version.minor>2?b.leave(a).then(c):b.leave(a,c)}}}function g(a,b){return a===b}var h={$cfg:{viewDecl:{$context:a._pluginapi._rootViewContext()}},$uiView:{}},i={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(b,j,k){return function(b,j,l){function m(a){(!a||a instanceof je)&&(g(s,a)||(Vb.traceUIViewConfigUpdated(z,a&&a.viewDecl&&a.viewDecl.$context),s=a,o(a)))}function n(){if(p&&(Vb.traceUIViewEvent("Removing (previous) el",p.data("$uiView")),p.remove(),p=null),r&&(Vb.traceUIViewEvent("Destroying scope",z),r.$destroy(),r=null),q){var a=q.data("$uiViewAnim");Vb.traceUIViewEvent("Animate out",a),w.leave(q,function(){a.$$animLeave.resolve(),p=null}),p=q,q=null}}function o(a){var d=b.$new(),f=e.defer(),g=e.defer(),h={$cfg:a,$uiView:z},i={$animEnter:f.promise,$animLeave:g.promise,$$animLeave:g};d.$emit("$viewContentLoading",y);var l=k(d,function(a){a.data("$uiViewAnim",i),a.data("$uiView",h),w.enter(a,j,function(){f.resolve(),r&&r.$emit("$viewContentAnimationEnded"),(Ya(v)&&!v||b.$eval(v))&&c(a)}),n()});q=l,r=d,r.$emit("$viewContentLoaded",a||s),r.$eval(u)}var p,q,r,s,t,u=l.onload||"",v=l.autoscroll,w=f(l,b),x=j.inheritedData("$uiView")||h,y=d(l.uiView||l.name||"")(b)||"$default",z={$type:"ng1",id:i.count++,name:y,fqn:x.$uiView.fqn?x.$uiView.fqn+"."+y:y,config:null,configUpdated:m,get creationContext(){var a=Ma("$cfg.viewDecl.$context")(x),b=Ma("$uiView.creationContext")(x);return a||b}};Vb.traceUIViewEvent("Linking",z),j.data("$uiView",{$uiView:z}),o(),t=a.registerUIView(z),b.$on("$destroy",function(){Vb.traceUIViewEvent("Destroying/Unregistering",z),t()})}}};return i}],Fa.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var Fe="function"==typeof Ja.module("ui.router").component,Ge=0;Ja.module("ui.router.state").directive("uiView",Ee),Ja.module("ui.router.state").directive("uiView",Fa),Ja.module("ui.router.state").provider("$uiViewScroll",Ha);var He="ui.router";a["default"]=He,a.core=ge,a.watchDigests=va,a.getLocals=Be,a.getNg1ViewConfigFactory=qa,a.ng1ViewsBuilder=ra,a.Ng1ViewConfig=je,a.StateProvider=ne,a.UrlRouterProvider=qe,a.root=kb,a.fromJson=mb,a.toJson=nb,a.forEach=ob,a.extend=pb,a.equals=qb,a.identity=k,a.noop=l,a.createProxyFunctions=m,a.inherit=rb,a.inArray=sb,a._inArray=n,a.removeFrom=tb,a._removeFrom=o,a.pushTo=ub,a._pushTo=p,a.deregAll=vb,a.defaults=q,a.mergeR=wb,a.ancestors=r,a.pick=s,a.omit=t,a.pluck=u,a.filter=v,a.find=w,a.mapObj=xb,a.map=x,a.values=yb,a.allTrueR=zb,a.anyTrueR=Ab,a.unnestR=Bb,a.flattenR=Cb,a.pushR=y,a.uniqR=Db,a.unnest=Eb,a.flatten=Fb,a.assertPredicate=Gb,a.assertMap=Hb,a.assertFn=z,a.pairs=Ib,a.arrayTuples=A,a.applyPairs=B,a.tail=C,a.copy=D,a._extend=F,a.silenceUncaughtInPromise=Jb,a.silentRejection=Kb,a.notImplemented=ib,a.services=jb,a.Glob=Ta,a.curry=c,a.compose=d,a.pipe=e,a.prop=Ka,a.propEq=La,a.parse=Ma,a.not=Na,a.and=f,a.or=g,a.all=Oa,a.any=Pa,a.is=Qa,a.eq=Ra,a.val=Sa,a.invoke=h,a.pattern=i,a.isUndefined=Xa,a.isDefined=Ya,a.isNull=Za,a.isNullOrUndefined=$a,a.isFunction=_a,a.isNumber=ab,a.isString=bb,a.isObject=cb,a.isArray=db,a.isDate=eb,a.isRegExp=fb,a.isState=gb,a.isInjectable=j,a.isPromise=hb,a.Queue=Lb,a.maxLength=S,a.padString=T,a.kebobString=U,a.functionToString=V,a.fnToString=W,a.stringify=X,a.beforeAfterSubstr=sc,a.hostRegex=tc,a.stripLastPathElement=uc,a.splitHash=vc,a.splitQuery=wc,a.splitEqual=xc,a.trimHashVal=yc,a.splitOnDelim=Y,a.joinNeighborsR=Z,a.Trace=Ub,a.trace=Vb,a.Param=cc,a.ParamTypes=zc,a.StateParams=Bc,a.ParamType=_b,a.PathNode=dc,a.PathUtils=ec,a.resolvePolicies=hc,a.defaultResolvePolicy=fc,a.Resolvable=gc,a.NATIVE_INJECTOR_TOKEN=lc,a.ResolveContext=mc,a.resolvablesBuilder=ea,a.StateBuilder=Gc,a.StateObject=Ua,a.StateMatcher=Hc,a.StateQueueManager=Ic,a.StateRegistry=Jc,a.StateService=Md,a.TargetState=Wb,a.HookBuilder=$b,a.matchState=K,a.RegisteredHook=Zb,a.makeEvent=L,a.Rejection=Nb,a.Transition=pc,a.TransitionHook=Yb,a.TransitionEventType=Hd,a.defaultTransOpts=Kd,a.TransitionService=Ld,a.UrlMatcher=Mc,a.UrlMatcherFactory=Nc,a.UrlRouter=Uc,a.UrlRuleFactory=Oc,a.BaseUrlRule=Pc,a.UrlService=bd,a.ViewService=Vc,a.UIRouterGlobals=Wc,a.UIRouter=dd,a.$q=Nd,a.$injector=Rd,a.BaseLocationServices=Vd,a.HashLocationService=Xd,a.MemoryLocationService=Zd,a.PushStateLocationService=_d,a.MemoryLocationConfig=ae,a.BrowserLocationConfig=be,a.keyValsToObjectR=Sd,a.getParams=Td,a.parseUrl=na,a.buildUrl=Ud,a.locationPluginFactory=oa,a.servicesPlugin=pa,a.hashLocationPlugin=ce,a.pushStateLocationPlugin=de,a.memoryLocationPlugin=ee,a.UIRouterPluginBase=fe,Object.defineProperty(a,"__esModule",{value:!0})});